!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ngrx/store"),require("@angular/core"),require("rxjs/BehaviorSubject"),require("@soushians/config"),require("@angular/animations"),require("@soushians/authentication"),require("rxjs/operators"),require("@soushians/user"),require("@angular/common"),require("@angular/platform-browser"),require("rxjs/observable/fromEvent"),require("@angular/router"),require("rxjs"),require("rxjs/add/operator/map"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/do"),require("rxjs/add/operator/catch"),require("rxjs/add/observable/empty"),require("@ngrx/effects"),require("@angular/forms"),require("@angular/common/http"),require("@angular/flex-layout"),require("@angular/material")):"function"==typeof define&&define.amd?define("@soushians/layout",["exports","@ngrx/store","@angular/core","rxjs/BehaviorSubject","@soushians/config","@angular/animations","@soushians/authentication","rxjs/operators","@soushians/user","@angular/common","@angular/platform-browser","rxjs/observable/fromEvent","@angular/router","rxjs","rxjs/add/operator/map","rxjs/add/operator/mergeMap","rxjs/add/operator/do","rxjs/add/operator/catch","rxjs/add/observable/empty","@ngrx/effects","@angular/forms","@angular/common/http","@angular/flex-layout","@angular/material"],e):e((t.soushians=t.soushians||{},t.soushians.layout={}),null,t.ng.core,t.rxjs.BehaviorSubject,null,t.ng.animations,null,t.rxjs.operators,null,t.ng.common,t.ng.platformBrowser,t.rxjs["observable/fromEvent"],t.ng.router,t.rxjs,t.rxjs["add/operator/map"],t.rxjs["add/operator/mergeMap"],t.rxjs["add/operator/do"],t.rxjs["add/operator/catch"],t.rxjs["add/observable/empty"],null,t.ng.forms,t.ng.common.http,t.ng["flex-layout"],t.ng.material)}(this,function(t,e,n,i,a,o,r,s,c,u,l,m,p,d,f,h,g,b,y,S,v,x,E,_){"use strict";var M=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function L(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}function A(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function N(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,a=o.call(t),r=[];try{for(;(void 0===e||0<e--)&&!(n=a.next()).done;)r.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(o=a["return"])&&o.call(a)}finally{if(i)throw i.error}}return r}var C="[Layout] Open Sidenav",w="[Layout] Close Sidenav",O={UPDATE_LAYOUT_CONFIG:"[Layout] UPDATE_LAYOUT_CONFIG",DO_SIGNOUT:"[Layout] do signout",TITLE_CHANGED:"[LAYOUT] TITLE_CHANGED",CHANGE_LAYOUT:"[Layout] Change Layout",CHANGE_MAIN_SIDENAVE_MODE:"[Layout] Change main sidenav mode",OPEN_SECOND_SIDEBAR:"[Layout] Open Second Sidebar",CLOSE_SECOND_SIDEBAR:"[Layout] Close Second Sidebar",CHANGE_SECOND_SIDENAV_MODE:"[Layout] Change second sidenav mode",FULLSCREEN:"[Layout] FULLSCREEN",EXIT_FULLSCREEN:"[Layout] EXIT_FULLSCREEN",TOGGLE_FULLSCREEN:"[Layout] TOGGLE_FULLSCREEN"},I=function(t){this.payload=t,this.type=O.UPDATE_LAYOUT_CONFIG},T=function(){this.type=C},D=function(){this.type=w},j=function(t){this.name=t,this.type=O.CHANGE_LAYOUT},R=function(t){this.mode=t,this.type=O.CHANGE_MAIN_SIDENAVE_MODE},F=function(t){this.mode=t,this.type=O.CHANGE_SECOND_SIDENAV_MODE},$=function(){this.type=O.DO_SIGNOUT},U=function(t){this.title=t,this.type=O.TITLE_CHANGED},B=function(){this.type=O.OPEN_SECOND_SIDEBAR},k=function(){this.type=O.CLOSE_SECOND_SIDEBAR},G=function(){this.type=O.FULLSCREEN},q=function(){this.type=O.EXIT_FULLSCREEN},P=function(){this.type=O.TOGGLE_FULLSCREEN},H={showMainSidenav:!1,showSecondSideNav:!1,secondSideNavMode:"over",mainSideNavMode:"over",showLeftNavBar:!1,stickyLeftNavBar:!1,layoutMode:"default",title:"",menuItems:[],signoutAction:{},fullscreen:!1};var V="[Layout][TOOLBAR] COMPORTABLE",X="[Layout][TOOLBAR] COMPACT",Y="[Layout][TOOLBAR] SUMMARY",z="[Layout][TOOLBAR] ENABLE_COMFORTABLE_MODE",W="[Layout][TOOLBAR] DISBALE_COMFORTABLE_MODE",K="[Layout][TOOLBAR] VISIBLE",J="[Layout][TOOLBAR] INVISIBLE",Q=function(){this.type=V},Z=function(){this.type=X},tt=function(){this.type=Y},et=function(){this.type=z},ot=function(){this.type=W},nt=function(){this.type=K},it=function(){this.type=J},at={mode:"compact",enableComfortableMode:!1,comfortableModeHaveBeenDone:!1,visibility:!0};var rt={layout:function(t,e){switch(void 0===t&&(t=H),e.type){case O.UPDATE_LAYOUT_CONFIG:return M({},t,e.payload);case w:return M({},t,{showMainSidenav:!1});case C:return M({},t,{showMainSidenav:!0});case O.TITLE_CHANGED:return M({},t,{title:e.title});case O.CHANGE_LAYOUT:return M({},t,{layoutMode:e.name});case O.CHANGE_MAIN_SIDENAVE_MODE:return M({},t,{mainSideNavMode:e.mode});case O.CLOSE_SECOND_SIDEBAR:return M({},t,{showSecondSideNav:!1});case O.OPEN_SECOND_SIDEBAR:return M({},t,{showSecondSideNav:!0});case O.CHANGE_SECOND_SIDENAV_MODE:return M({},t,{secondSideNavMode:e.mode});case O.FULLSCREEN:return M({},t,{fullscreen:!0});case O.EXIT_FULLSCREEN:return M({},t,{fullscreen:!1});default:return t}},toolbar:function(t,e){switch(void 0===t&&(t=at),e.type){case X:return t.visibility?M({},t,{mode:"compact"}):M({},t,{mode:"hide"});case V:return t.visibility?M({},t,{mode:t.enableComfortableMode?"comfortable":"compact"}):M({},t,{mode:"hide"});case Y:return t.visibility?M({},t,{mode:"summary"}):M({},t,{mode:"hide"});case z:return t.visibility?M({},t,{enableComfortableMode:!0}):M({},t,{mode:"hide"});case W:return t.visibility?M({},t,{mode:"compact",enableComfortableMode:!1}):M({},t,{mode:"hide"});case K:return M({},t,{mode:"compact",visibility:!0});case J:return M({},t,{mode:"hide",visibility:!1});default:return t}}},st=e.createFeatureSelector("layout"),ct=e.createSelector(st,function(t){return t.layout}),ut=e.createSelector(ct,function(t){return t.title}),lt=e.createSelector(ct,function(t){return t.showMainSidenav}),mt=e.createSelector(ct,function(t){return t.mainSideNavMode}),pt=e.createSelector(ct,function(t){return t.layoutMode}),dt=e.createSelector(ct,function(t){return t.showSecondSideNav}),ft=e.createSelector(ct,function(t){return t.secondSideNavMode}),ht=e.createSelector(ct,function(t){return t.fullscreen}),gt=e.createSelector(st,function(t){return t.toolbar}),bt=e.createSelector(gt,function(t){return t.mode}),yt={showMainSidenav:!1,showSecondSideNav:!0,secondSideNavMode:"over",mainSideNavMode:"over",showLeftNavBar:!1,stickyLeftNavBar:!1,layoutMode:"with-margin",title:"",menuItems:[{route:"/",icon:"multiline_chart",roles:["Admin","User"],title:"صفحه اصلی"},{route:"/configs",icon:"settings",roles:["Admin"],title:"تنظیمات"},{route:"/source",icon:"device_hub",roles:["Admin"],title:"آدرس سرویس ها"}],signoutAction:{}},St=new n.InjectionToken("LayoutModuleConfigModel"),vt=function(){function t(t,e){var o=this;this.store=e,this.config$=new i.BehaviorSubject(this._config),this._config=Object.assign({},yt,t),this.config$.next(this._config),this.store.select(a.getConfigs).map(function(t){return t.find(function(t){return"layout_config"==t.Name})}).subscribe(function(t){t&&(o.store.dispatch(new I(t.Config)),o._config=Object.assign({},o._config,t.Config),o.config$.next(o._config))})}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[St]}]},{type:e.Store}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(St),n.inject(e.Store))},token:t,providedIn:"root"}),t}(),xt=function(){function t(t,e,o){this.store=t,this.signinService=e,this.configurationService=o,this.closeSidebar=new n.EventEmitter,this.user$=this.store.select(c.getAccountInfo),this._observe_on_layout_config_and_filter_routes()}return t.prototype._observe_on_layout_config_and_filter_routes=function(){this.routes$=this.configurationService.config$.pipe(s.map(function(t){return t.menuItems}),s.combineLatest(this.user$),s.map(function(t){var e=N(t,2),o=e[0],n=e[1];return n.Roles?0==n.Roles.length?[]:o.filter(function(e){return n.Roles.some(function(t){return-1<e.roles.indexOf(t)})}):[]}))},t.decorators=[{type:n.Component,args:[{selector:"ngs-layout-main-menu",template:'<mat-list class="main-menu-container">\n  <div *ngIf="authenticated | async">\n    <a *ngFor="let item of routes$ | async" (click)="closeSidebar.emit()" routerLinkActive="active" mat-list-item [routerLink]="[item.route]">\n      <mat-icon mat-list-icon>{{item.icon}}</mat-icon>\n      <span mdLine>{{item.title}}</span>\n    </a>\n  </div>\n</mat-list>',styles:[".active{background:rgba(0,0,0,.15)}.mat-list-item.active mat-icon{color:#0072ae}a.mat-list-item.child{margin-right:20px}#clearUserMenuItem{position:absolute;left:13px;top:13px}"],animations:[o.trigger("childMenu",[o.state("inactive",o.style({height:"0px",opacity:"0"})),o.state("active",o.style({height:"48px",opacity:"1"})),o.transition("inactive => active",o.animate("100ms ease-in")),o.transition("active => inactive",o.animate("100ms ease-out"))]),o.trigger("menuItem",[o.state("inactive",o.style({height:"48px"})),o.state("active",o.style({height:"100px"})),o.transition("inactive => active",o.animate("100ms ease-in")),o.transition("active => inactive",o.animate("100ms ease-out"))])]}]}],t.ctorParameters=function(){return[{type:e.Store},{type:r.SigninService},{type:vt}]},t.propDecorators={closeSidebar:[{type:n.Output}],authenticated:[{type:n.Input}],customerMobileInput:[{type:n.ViewChild,args:["customerMobileInput"]}]},t}(),Et=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:n.Component,args:[{selector:"app-search-box",template:'<div class="search-box">\n  \x3c!--<td-search-box class="search-box-container" backIcon="arrow_back" placeholder="جستجو" [showUnderline]="false" [debounce]="500" [alwaysVisible]="false"\n                 (searchDebounce)="searchInputTerm = $event" (search)="searchInputTerm = $event" (clear)="searchInputTerm = \'\'">\n  </td-search-box>--\x3e\n</div>',styles:[""]}]}],t.ctorParameters=function(){return[]},t}(),_t=function(){function t(t){this.sdf=t}return t.decorators=[{type:n.Component,args:[{selector:"app-logo-container",template:"\n\x3c!--<img class=\"logoTypeAnimation\" src='../../../assets/images/logo-type.png' />--\x3e",styles:[".shatelLogoAnimation{height:35px;cursor:pointer;z-index:2}#background{position:absolute;top:0;right:0;width:300px;height:70px}"]}]}],t.ctorParameters=function(){return[{type:vt}]},t}(),Mt=function(){function t(t,e,o,n){var i=this;this.document=t,this._location=e,this.store=o,this.configurationService=n,this.toolbarAnimationState="compact",this.menuAnimationState="compact",this.logoAnimationState="compact",this.titleAnimationState="compact",this.user$=this.store.select(c.getAccountInfo),this.store.dispatch(new Q),this.config$=this.store.select(gt),this.config$.subscribe(function(t){return i.config=t}),this.lastScroll=this.document.body.scrollTop,this.showSecondSidenav=this.store.select(dt),this.showMainSidenav=this.store.select(lt),this.store.select(bt).subscribe(function(t){setTimeout(function(){return i.menuAnimationState=t},1),setTimeout(function(){return i.logoAnimationState=t},1),setTimeout(function(){return i.titleAnimationState=t},1),setTimeout(function(){return i.toolbarAnimationState=t},1)}),this._observe_on_layout_config_and_filter_routes(),m.fromEvent(this.document.body,"scroll").subscribe(function(){var t=i.document.body.scrollTop,e=t-i.lastScroll<0&&i.document.body.scrollHeight-t<100;if(i.lastScroll=i.document.body.scrollTop,i.config.visibility)if(0==t){if("comfortable"==i.config.mode)return;i.store.dispatch(new Q)}else if(t<128||e){if("compact"==i.config.mode)return;i.store.dispatch(new Z)}else{if("summary"==i.config.mode)return;i.store.dispatch(new tt)}})}return t.prototype.onWindowScroll=function(){},t.prototype.signout=function(){this.store.dispatch(new $)},t.prototype.goback=function(){this._location.back()},t.prototype.toggleSecondSidebar=function(){var e;this.showSecondSidenav.subscribe(function(t){e=t?new k:new B}),this.store.dispatch(e)},t.prototype.toggleMainSidebar=function(){var e;this.showMainSidenav.subscribe(function(t){e=t?new D:new T}),this.store.dispatch(e)},t.prototype._observe_on_layout_config_and_filter_routes=function(){this.menuItems$=this.configurationService.config$.pipe(s.map(function(t){return t.menuItems}),s.combineLatest(this.user$),s.map(function(t){var e=N(t,2),o=e[0],n=e[1];return n.Roles?0==n.Roles.length?[]:o.filter(function(e){return n.Roles.some(function(t){return-1<e.roles.indexOf(t)})}):[]}))},t.decorators=[{type:n.Component,args:[{selector:"layout-toolbar",template:'<mat-toolbar [@toolbarAnimation]="toolbarAnimationState">\n  <mat-toolbar-row>\n      \x3c!-- <div id="background"></div> --\x3e\n      <img [@logoAnimation]="logoAnimationState" id="logo" routerLink=\'/\' src=\'../../../assets/images/shatel-logo.png\' />\n\n    <button type="button" *ngIf=\'showSidebarMenu && false\' (click)="toggleMainSidebar()" mat-icon-button fxFlex="nogrow" fxLayoutAlign="center center">\n      <mat-icon>menu</mat-icon>\n    </button>\n    <span [@titleAnimation]="titleAnimationState" id=\'app-name\'>\n      {{app_config?.Config.AppTitle}}\n    </span>\n    <app-title fxFlex fxLayoutAlign="start center"></app-title>\n    <app-search-box fxFlex fxLayoutAlign="end center"></app-search-box>\n    \n    <button *ngIf="!displayName" mat-button routerLink="auth/signin">\n      ورود\n    </button>\n    <button *ngIf="displayName" mat-button [matMenuTriggerFor]="toolbarMenu1">\n      <mat-icon>account_circle</mat-icon>\n      <span>\n        {{displayName}}\n      </span>\n    </button>\n    <mat-menu #toolbarMenu1>\n      <button routerLink=\'/user/panel\' mat-menu-item>\n        <mat-icon>fingerprint</mat-icon>\n        <span>\n          مدیریت کاربری\n        </span>\n      </button>\n      <button (click)=\'signout()\' mat-menu-item>\n        <mat-icon>exit_to_app</mat-icon>\n        <span>خروج</span>\n      </button>\n    </mat-menu>\n    <button mat-icon-button type="button" (click)="toggleSecondSidebar()" fxFlex="nogrow" fxLayoutAlign="center center">\n      <mat-icon>notifications</mat-icon>\n    </button>\n    <button mat-icon-button (click)=\'goback()\'>\n      <mat-icon>arrow_back</mat-icon>\n    </button>\n    \n  </mat-toolbar-row>\n  <mat-toolbar-row>\n    <div id="secondToolbar" [@menuAnimation]="menuAnimationState">\n      <button mat-button \n      *ngFor="let menu of menuItems$ | async"\n      routerLinkActive="active"\n      [routerLink]="[menu.route]">\n      \x3c!-- <mat-icon mat-list-icon>{{menu.icon}}</mat-icon> --\x3e\n      <span>{{menu.title}}</span>\n    </button>\n  </div>\n</mat-toolbar-row>\n</mat-toolbar>',styles:["#logo,#secondToolbar{transition:all;position:absolute}#app-name{padding-right:8px}"],animations:[o.trigger("logoAnimation",[o.state("comfortable",o.style({width:"90px",height:"90px",top:"50px",right:"calc(50% - 50px)"})),o.state("compact",o.style({width:"36px",height:"36px",top:"13px",right:"13px"})),o.state("summary",o.style({width:"36px",height:"36px",top:"76px",right:"10px"})),o.state("hide",o.style({width:"0",height:"0",top:"76px",right:"10px"})),o.transition("comfortable => compact",o.animate("800ms ease-out")),o.transition("comfortable => hide",o.animate("800ms ease-in")),o.transition("hide => comfortable",o.animate("800ms ease-in")),o.transition("compact => hide",o.animate("800ms ease-in")),o.transition("hide => compact",o.animate("800ms ease-in")),o.transition("summary => hide",o.animate("800ms ease-in")),o.transition("hide => summary",o.animate("800ms ease-in")),o.transition("summary => compact",o.animate("400ms ease-out")),o.transition("summary => comfortable",o.animate("800ms ease-out")),o.transition("compact => comfortable",o.animate("800ms ease-out")),o.transition("compact => summary",o.animate("400ms ease-out"))]),o.trigger("menuAnimation",[o.state("comfortable",o.style({right:"50%",transform:"translateX(50%)",bottom:"25px"})),o.state("compact",o.style({right:"45px",transform:"translateX(0)",bottom:"13px"})),o.state("summary",o.style({right:"75px",transform:"translateX(0)",bottom:"14px"})),o.state("hide",o.style({right:"75px",transform:"translateX(0)",bottom:"14px"})),o.transition("comfortable => compact",o.animate("800ms ease-in")),o.transition("comfortable => hide",o.animate("400ms ease-in")),o.transition("hide => comfortable",o.animate("600ms ease-in")),o.transition("compact => hide",o.animate("400ms ease-in")),o.transition("hide => compact",o.animate("600ms ease-in")),o.transition("summary => hide",o.animate("400ms ease-in")),o.transition("hide => summary",o.animate("600ms ease-in")),o.transition("summary => compact",o.animate("400ms ease-out")),o.transition("summary => comfortable",o.animate("800ms ease-out")),o.transition("compact => comfortable",o.animate("800ms ease-out")),o.transition("compact => summary",o.animate("400ms ease-in"))]),o.trigger("titleAnimation",[o.state("comfortable",o.style({"margin-right":"0px","font-size":"larger","font-weight":"bolder",transform:"translateX(50%)",right:"calc(50%)",bottom:"75px",position:"absolute",padding:0})),o.state("compact",o.style({"margin-right":"0px","font-size":"16px","font-weight":"bolder",transform:"translateX(0)",right:"60px",bottom:"79px",position:"absolute",padding:0})),o.state("summary",o.style({"margin-right":"0px","font-size":"16px","font-weight":"bolder",transform:"translateX(0)",right:"60px",bottom:"79px",position:"absolute",padding:0})),o.state("hide",o.style({"margin-right":"0px","font-size":"1px","font-weight":"bolder",transform:"translateX(0)",right:"60px",bottom:"79px",position:"absolute",padding:0})),o.transition("comfortable => compact",o.animate("850ms ease-out")),o.transition("comfortable => hide",o.animate("800ms ease-in")),o.transition("hide => comfortable",o.animate("800ms ease-in")),o.transition("compact => hide",o.animate("800ms ease-in")),o.transition("hide => compact",o.animate("800ms ease-in")),o.transition("summary => hide",o.animate("800ms ease-in")),o.transition("hide => summary",o.animate("800ms ease-in")),o.transition("summary => compact",o.animate("400ms ease-out")),o.transition("summary => comfortable",o.animate("800ms ease-out")),o.transition("compact => comfortable",o.animate("800ms ease-out")),o.transition("compact => summary",o.animate("400ms ease-in"))]),o.trigger("toolbarAnimation",[o.state("comfortable",o.style({backgroundColor:"rgba(256,256,256,1)",color:"rgba(30,30,30,1)",height:"33vh",top:"0",boxShadow:"1px 1px 3px rgba(0,0,0,0)"})),o.state("compact",o.style({backgroundColor:"rgba(256,256,256,1)",height:"128px",top:"0",boxShadow:"1px 1px 3px rgba(0,0,0,0.5)"})),o.state("summary",o.style({backgroundColor:"rgba(256,256,256,1)",height:"128px",top:"-64px",boxShadow:"1px 1px 3px rgba(0,0,0,0.5)"})),o.state("hide",o.style({backgroundColor:"rgba(256,256,256,1)",height:"128px",top:"-128px",boxShadow:"1px 1px 3px rgba(0,0,0,0.5)"})),o.transition("comfortable => compact",o.animate("800ms ease-in")),o.transition("comfortable => hide",o.animate("800ms ease-in")),o.transition("hide => comfortable",o.animate("800ms ease-in")),o.transition("compact => hide",o.animate("800ms ease-in")),o.transition("hide => compact",o.animate("800ms ease-in")),o.transition("summary => hide",o.animate("800ms ease-in")),o.transition("hide => summary",o.animate("800ms ease-in")),o.transition("summary => compact",o.animate("400ms ease-out")),o.transition("summary => comfortable",o.animate("800ms ease-out")),o.transition("compact => comfortable",o.animate("800ms ease-out")),o.transition("compact => summary",o.animate("400ms ease-in"))])]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[l.DOCUMENT]}]},{type:u.Location},{type:e.Store},{type:vt}]},t.propDecorators={showSidebarMenu:[{type:n.Input}],app_config:[{type:n.Input,args:["app-config"]}],user:[{type:n.Input}],displayName:[{type:n.Input}],onWindowScroll:[{type:n.HostListener,args:["body:scroll",[]]}]},t}(),Lt=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:n.Component,args:[{selector:"app-footer",template:'<div fxLayoutAlign="center center" class="footer-text">\n    {{app_config?.Config.FooterCopyright}}\n</div>',styles:[":host{position:absolute;bottom:0;left:0;right:0;border-top:1px solid #e5e5e5;padding:8px;overflow:hidden}.footer-text{position:relative;top:12px}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={app_config:[{type:n.Input,args:["app-config"]}]},t}(),At=function(){function t(t,e){var i=this;this.store=t,this.router=e,this.mapper=[],this.title$=this.store.select(ut),this.router.events.subscribe(function(o){if(o instanceof p.NavigationEnd){var n="";i.mapper.forEach(function(t){var e=t(o);return!!e&&(n=e,!0)}),i.store.dispatch(new U("/ "+n||""))}})}return t.decorators=[{type:n.Component,args:[{selector:"app-title",template:'<div id="title">\n    {{title$ | async}}\n</div>',styles:["#title{margin-right:-30px;font-weight:bolder;font-size:13px;padding:18px 40px}"]}]}],t.ctorParameters=function(){return[{type:e.Store},{type:p.Router}]},t}(),Nt=function(){function t(t,e,o,n){var i=this;this.store=t,this.router=e,this.configService=o,this.userFacadeService=n,this.showSidebarMenu=new d.BehaviorSubject(!0),this.width=100,this.store.dispatch(new R("push")),this.user$=this.store.select(function(t){return t.user.user.data}),this.displayName$=this.userFacadeService.getDisplayName(),this.showMainSidenav=this.store.select(lt),this.mainSidenavMode=this.store.select(mt),this.toolbarAnimationState=this.store.select(bt),this.isFullscreen$=this.store.select(ht),this.mode$=this.isFullscreen$.map(function(t){return t?"invisible":"visible"}),this.store.dispatch(new F("push")),this.showSecondSidenav=this.store.select(dt),this.secondSidenavMode=this.store.select(ft),this.layoutMode=this.store.select(pt),this.router.events.filter(function(t){return t instanceof p.NavigationEnd}).subscribe(function(t){["/auth/signin"==t.urlAfterRedirects,"/auth/signup/register"==t.urlAfterRedirects,"/auth/signup/verification"==t.urlAfterRedirects,"/user/password/reset"==t.urlAfterRedirects].some(function(t){return t})?i.showSidebarMenu.next(!1):i.showSidebarMenu.next(!0)}),this.layoutMode.subscribe(function(t){i.mainSideNav&&(i.mainSideNav.nativeElement.className="",i.mainSideNav.nativeElement.classList.add(t))})}return t.prototype.onSecondSidebarClosedStart=function(){this.store.dispatch(new k)},t.prototype.onSidebarClosedStart=function(){this.store.dispatch(new D)},t.decorators=[{type:n.Component,args:[{selector:"layout-main",template:'<div #mainSideNav [className]="toolbarAnimationState | async" [class.fullscreen]="isFullscreen$ | async">\n  \n  \x3c!-- <mat-progress-bar *ngIf=\'progressStatus$ | async\' color="primary" mode="query"></mat-progress-bar> --\x3e\n  <layout-toolbar [user]="user$ | async" [displayName]="displayName$ | async" [showSidebarMenu]=\'showSidebarMenu | async\' [app-config]="app_config"></layout-toolbar>\n  \n  <mat-sidenav-container id="layout-sidnav">\n    <mat-sidenav [mode]="mainSidenavMode | async" [opened]=\'showMainSidenav | async\' #sidebar (closedStart)="onSidebarClosedStart()">\n      <mat-nav-list>\n        <ngs-layout-main-menu [authenticated]=\'showSidebarMenu\' (closeSidebar)="sidebar.close()" (click)="onSecondSidebarClosedStart()"></ngs-layout-main-menu>\n      </mat-nav-list>\n    </mat-sidenav>\n    \x3c!-- <mat-sidenav [mode]="secondSidenavMode | async" [opened]=\'showSecondSidenav | async\' (closedStart)="onSecondSidebarClosedStart()"\n      position="end" #second_sidebar class="second_sidebar">\n      <mat-nav-list fxLayout=\'column\'>\n      </mat-nav-list>\n    </mat-sidenav> --\x3e\n    <div fxFlexLayout=\'column\' id="app-main-container" fxLayoutAlign=\'center center\'>\n      <div fxFlex=\'0 0 100\'>\n        <router-outlet></router-outlet>\n        <footer [@mode]="mode$ | async">\n          <router-outlet name="footer_A"></router-outlet>\n          <router-outlet name="footer_B"></router-outlet>\n          <app-footer [app-config]="app_config"></app-footer>\n        </footer>\n      </div>\n    </div>\n  </mat-sidenav-container>\n</div>',styles:["#purchase-fab-button{position:fixed;bottom:23px;left:31px}md-progress-bar{position:absolute!important}.with-margin #app-main-container{margin-top:25px;padding-right:25px;padding-left:25px}.second_sidebar{width:380px}.more-detail{margin:8px;box-sizing:border-box;padding:10px;text-align:center;width:96%;border:1px solid #dedede;outline:0;cursor:pointer;transition:all .3s ease}.more-detail:hover{background:#eee}footer{border-top:1px solid #e5e5e5;margin-top:25px;background-color:#f1f1f1}"],animations:[o.trigger("mode",[o.state("visible",o.style({transform:"scaleY(1) translateY(0)"})),o.state("invisible",o.style({height:"0",transform:"scaleY(0) translateY(100%)"})),o.transition("visible => invisible",[o.animate("1000ms")]),o.transition("invisible => visible",[o.animate("1000ms")])])]}]}],t.ctorParameters=function(){return[{type:e.Store},{type:p.Router},{type:vt},{type:c.UserFacadeService}]},t.propDecorators={app_config:[{type:n.Input,args:["app-config"]}],mainSideNav:[{type:n.ViewChild,args:["mainSideNav"]}]},t}(),Ct=function(){function t(t,e,o){this.actions$=t,this.router=e,this.store=o,this.DoSignout$=this.actions$.ofType(O.DO_SIGNOUT).pipe(s.map(function(){return new r.DoSignoutAction})),this.fullscreen$=this.actions$.ofType(O.FULLSCREEN).pipe(s.map(function(){return new it})),this.exit_fullscreen$=this.actions$.ofType(O.EXIT_FULLSCREEN).pipe(s.map(function(){return new nt})),this.fullscren_toolbar$=this.actions$.ofType(O.TOGGLE_FULLSCREEN).pipe(s.withLatestFrom(this.store.select(ht)),s.map(function(t){var e=N(t,2);e[0];return e[1]?new q:new G}))}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:S.Actions},{type:p.Router},{type:e.Store}]},L([S.Effect(),A("design:type",Object)],t.prototype,"DoSignout$",void 0),L([S.Effect(),A("design:type",Object)],t.prototype,"fullscreen$",void 0),L([S.Effect(),A("design:type",Object)],t.prototype,"exit_fullscreen$",void 0),L([S.Effect(),A("design:type",Object)],t.prototype,"fullscren_toolbar$",void 0),t}(),wt=function(){function t(){}return t.forRoot=function(t){return{ngModule:Ot,providers:[{provide:St,useValue:t}]}},t.decorators=[{type:n.NgModule,args:[{imports:[u.CommonModule,l.BrowserModule,p.RouterModule,v.FormsModule,x.HttpClientModule,E.FlexLayoutModule,_.MatIconModule,_.MatButtonModule,_.MatCardModule,_.MatSnackBarModule,_.MatSidenavModule,_.MatExpansionModule,_.MatSelectModule,_.MatFormFieldModule,_.MatListModule,_.MatMenuModule,_.MatRadioModule,_.MatInputModule,_.MatToolbarModule,_.MatDatepickerModule,_.MatProgressBarModule,p.RouterModule,a.NgsConfigModule],declarations:[xt,Et,_t,Mt,Lt,At,Nt],exports:[xt,Et,_t,Mt,Lt,At,Nt]}]}],t}(),Ot=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[wt,e.StoreModule.forFeature("layout",rt),S.EffectsModule.forFeature([Ct])],exports:[wt]}]}],t}();t.LayoutActionTypes=O,t.TitleChangedAction=U,t.OpenSidenavAction=T,t.CloseSidenavAction=D,t.ChangeSideNavMode=R,t.ChangeLayout=j,t.CloseSecondSidenavAction=k,t.ChangeSecondSidenavMode=F,t.OpenSecondSidenavAction=B,t.ChangeToolbatToComfortableModeAction=Q,t.ChangeToolbatToCompactModeAction=Z,t.DisableComfortableModeAction=ot,t.EnableComfortableModeAction=et,t.VisibleToolbarAction=nt,t.FullscreenAction=G,t.ExitFullscreenAction=q,t.InvisibleToolbarAction=it,t.ToggleFullscreenAction=P,t.NgsLayoutModule=wt,t.RootNgsLayoutModule=Ot,t.MODULE_DEFAULT_CONFIG=yt,t.MODULE_CONFIG_TOKEN=St,t.ɵg=Lt,t.ɵe=_t,t.ɵa=xt,t.ɵi=Nt,t.ɵd=Et,t.ɵh=At,t.ɵf=Mt,t.ɵk=Ct,t.ɵj=rt,t.ɵc=vt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=soushians-layout.umd.min.js.map