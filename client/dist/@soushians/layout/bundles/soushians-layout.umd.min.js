!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser"),require("@ngrx/store"),require("@angular/common"),require("@angular/router"),require("@angular/forms"),require("@angular/common/http"),require("@angular/flex-layout"),require("@ngrx/effects"),require("@angular/material"),require("@ngx-translate/core"),require("@soushians/config"),require("rxjs/Observable"),require("@angular/animations"),require("@soushians/authentication"),require("rxjs/BehaviorSubject"),require("rxjs/operators"),require("@soushians/user"),require("rxjs/observable/fromEvent"),require("rxjs"),require("rxjs/add/operator/map"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/do"),require("rxjs/add/operator/catch"),require("rxjs/add/observable/empty"),require("@soushians/rule")):"function"==typeof define&&define.amd?define("@soushians/layout",["exports","@angular/core","@angular/platform-browser","@ngrx/store","@angular/common","@angular/router","@angular/forms","@angular/common/http","@angular/flex-layout","@ngrx/effects","@angular/material","@ngx-translate/core","@soushians/config","rxjs/Observable","@angular/animations","@soushians/authentication","rxjs/BehaviorSubject","rxjs/operators","@soushians/user","rxjs/observable/fromEvent","rxjs","rxjs/add/operator/map","rxjs/add/operator/mergeMap","rxjs/add/operator/do","rxjs/add/operator/catch","rxjs/add/observable/empty","@soushians/rule"],e):e(((t=t||self).soushians=t.soushians||{},t.soushians.layout={}),t.ng.core,t.ng.platformBrowser,t.store,t.ng.common,t.ng.router,t.ng.forms,t.ng.common.http,t.ng["flex-layout"],t.effects,t.ng.material,t.core$1,t.config,t.rxjs.Observable,t.ng.animations,t.authentication,t.rxjs.BehaviorSubject,t.rxjs.operators,t.user,t.rxjs["observable/fromEvent"],t.rxjs,t.rxjs["add/operator/map"],t.rxjs["add/operator/mergeMap"],t.rxjs["add/operator/do"],t.rxjs["add/operator/catch"],t.rxjs["add/observable/empty"],t.rule)}(this,(function(t,e,o,n,a,i,r,s,c,m,u,l,p,d,f,h,g,b,y,v,S,x,_,A,M,E,L){"use strict";var w=function(){return(w=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function O(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r}function C(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function N(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,a,i=o.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)r.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(a)throw a.error}}return r}var I="[Layout] Open Sidenav",T="[Layout] Close Sidenav",D={UPDATE_LAYOUT_CONFIG:"[Layout] UPDATE_LAYOUT_CONFIG",DO_SIGNOUT:"[Layout] do signout",TITLE_CHANGED:"[LAYOUT] TITLE_CHANGED",CHANGE_LAYOUT:"[Layout] Change Layout",CHANGE_MAIN_SIDENAVE_MODE:"[Layout] Change main sidenav mode",OPEN_SECOND_SIDEBAR:"[Layout] Open Second Sidebar",CLOSE_SECOND_SIDEBAR:"[Layout] Close Second Sidebar",CHANGE_SECOND_SIDENAV_MODE:"[Layout] Change second sidenav mode",FULLSCREEN:"[Layout] FULLSCREEN",EXIT_FULLSCREEN:"[Layout] EXIT_FULLSCREEN",TOGGLE_FULLSCREEN:"[Layout] TOGGLE_FULLSCREEN"},B=function(t){this.payload=t,this.type=D.UPDATE_LAYOUT_CONFIG};var R=function(){this.type=I};var j=function(){this.type=T};var F=function(t){this.name=t,this.type=D.CHANGE_LAYOUT};var k=function(t){this.mode=t,this.type=D.CHANGE_MAIN_SIDENAVE_MODE};var $=function(t){this.mode=t,this.type=D.CHANGE_SECOND_SIDENAV_MODE};var U=function(){this.type=D.DO_SIGNOUT};var P=function(t){this.title=t,this.type=D.TITLE_CHANGED};var G=function(){this.type=D.OPEN_SECOND_SIDEBAR};var q=function(){this.type=D.CLOSE_SECOND_SIDEBAR};var V=function(){this.type=D.FULLSCREEN};var H=function(){this.type=D.EXIT_FULLSCREEN};var X=function(){this.type=D.TOGGLE_FULLSCREEN};var z={showMainSidenav:!1,showSecondSideNav:!1,secondSideNavMode:"over",mainSideNavMode:"over",showLeftNavBar:!1,stickyLeftNavBar:!1,layoutMode:"default",title:"",menuItems:[],signoutAction:{},fullscreen:!1};function Y(t,e){switch(void 0===t&&(t=z),e.type){case D.UPDATE_LAYOUT_CONFIG:var o={};return Object.keys(e.payload).forEach((function(n){n in t&&(o[n]=e.payload[n])})),w({},t,o);case T:return w({},t,{showMainSidenav:!1});case I:return w({},t,{showMainSidenav:!0});case D.TITLE_CHANGED:return w({},t,{title:e.title});case D.CHANGE_LAYOUT:return w({},t,{layoutMode:e.name});case D.CHANGE_MAIN_SIDENAVE_MODE:return w({},t,{mainSideNavMode:e.mode});case D.CLOSE_SECOND_SIDEBAR:return w({},t,{showSecondSideNav:!1});case D.OPEN_SECOND_SIDEBAR:return w({},t,{showSecondSideNav:!0});case D.CHANGE_SECOND_SIDENAV_MODE:return w({},t,{secondSideNavMode:e.mode});case D.FULLSCREEN:return w({},t,{fullscreen:!0});case D.EXIT_FULLSCREEN:return w({},t,{fullscreen:!1});default:return t}}var W={COMPORTABLE:"[Layout][TOOLBAR] COMPORTABLE",COMPACT:"[Layout][TOOLBAR] COMPACT",SUMMARY:"[Layout][TOOLBAR] SUMMARY",ENABLE_COMFORTABLE_MODE:"[Layout][TOOLBAR] ENABLE_COMFORTABLE_MODE",DISBALE_COMFORTABLE_MODE:"[Layout][TOOLBAR] DISBALE_COMFORTABLE_MODE",VISIBLE:"[Layout][TOOLBAR] VISIBLE",INVISIBLE:"[Layout][TOOLBAR] INVISIBLE"},K=function(){this.type=W.COMPORTABLE};var J=function(){this.type=W.COMPACT};var Q=function(){this.type=W.SUMMARY};var Z=function(){this.type=W.ENABLE_COMFORTABLE_MODE};var tt=function(){this.type=W.DISBALE_COMFORTABLE_MODE};var et=function(){this.type=W.VISIBLE};var ot=function(){this.type=W.INVISIBLE};var nt={mode:"compact",enableComfortableMode:!1,comfortableModeHaveBeenDone:!1,visibility:!0};function at(t,e){switch(void 0===t&&(t=nt),e.type){case W.COMPACT:return t.visibility?w({},t,{mode:"compact"}):w({},t,{mode:"hide"});case W.COMPORTABLE:return t.visibility?w({},t,{mode:t.enableComfortableMode?"comfortable":"compact"}):w({},t,{mode:"hide"});case W.SUMMARY:return t.visibility?w({},t,{mode:"summary"}):w({},t,{mode:"hide"});case W.ENABLE_COMFORTABLE_MODE:return t.visibility?w({},t,{enableComfortableMode:!0}):w({},t,{mode:"hide"});case W.DISBALE_COMFORTABLE_MODE:return t.visibility?w({},t,{mode:"compact",enableComfortableMode:!1}):w({},t,{mode:"hide"});case W.VISIBLE:return w({},t,{mode:"compact",visibility:!0});case W.INVISIBLE:return w({},t,{mode:"hide",visibility:!1});default:return t}}var it={layout:Y,toolbar:at};var rt=n.createFeatureSelector("layout"),st=n.createSelector(rt,(function(t){return t.layout})),ct=n.createSelector(st,(function(t){return t.title})),mt=n.createSelector(st,(function(t){return t.showMainSidenav})),ut=n.createSelector(st,(function(t){return t.mainSideNavMode})),lt=n.createSelector(st,(function(t){return t.layoutMode})),pt=n.createSelector(st,(function(t){return t.showSecondSideNav})),dt=n.createSelector(st,(function(t){return t.secondSideNavMode})),ft=n.createSelector(st,(function(t){return t.fullscreen})),ht=n.createSelector(rt,(function(t){return t.toolbar})),gt=n.createSelector(ht,(function(t){return t.mode}));var bt=function(t){var e=N(t,2),o=e[0],n=e[1];return n.Roles?0==n.Roles.length?[]:o.filter((function(t){return n.Roles.some((function(e){return t.roles.indexOf(e)>-1}))})):[]},yt={theme:"theme_B",showMainSidenav:!1,showSecondSideNav:!0,secondSideNavMode:"over",mainSideNavMode:"over",showLeftNavBar:!1,stickyLeftNavBar:!1,layoutMode:"with-margin",title:"",menuItems:[],signoutAction:{},menu_item_authorization_operator:bt},vt=new e.InjectionToken("LayoutModuleConfigModel"),St=function(){function t(t,e){var o=this;this.store=e,this.config$=new g.BehaviorSubject(this._config),this._config=Object.assign({},yt,t),this.config$.next(this._config),this.store.select(p.getConfigs).map((function(t){return t.find((function(t){return"layout_config"==t.Name}))})).subscribe((function(t){t&&(o.store.dispatch(new B(t.Config)),o._config=Object.assign({},o._config,t.Config),o.config$.next(o._config))}))}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[vt]}]},{type:n.Store}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(vt),e.ɵɵinject(n.Store))},token:t,providedIn:"root"}),t}();var xt=function(){function t(t,o,n){this.store=t,this.signinService=o,this.configurationService=n,this.closeSidebar=new e.EventEmitter,this.user$=this.store.select(y.getAccountInfo),this._observe_on_layout_config_and_filter_routes()}return t.prototype._observe_on_layout_config_and_filter_routes=function(){this.routes$=this.configurationService.config$.pipe(b.map((function(t){return t.menuItems})),b.combineLatest(this.user$),b.map(this.configurationService.config$.getValue().menu_item_authorization_operator))},t.decorators=[{type:e.Component,args:[{selector:"ngs-layout-main-menu",template:'<mat-list class="main-menu-container">\r\n  <div *ngIf="authenticated | async">\r\n    <a *ngFor="let item of routes$ | async" (click)="closeSidebar.emit()" routerLinkActive="active" mat-list-item [routerLink]="[item.route]">\r\n      <mat-icon mat-list-icon>{{item.icon}}</mat-icon>\r\n      <span mdLine>{{item.title}}</span>\r\n    </a>\r\n  </div>\r\n</mat-list>',animations:[f.trigger("childMenu",[f.state("inactive",f.style({height:"0px",opacity:"0"})),f.state("active",f.style({height:"48px",opacity:"1"})),f.transition("inactive => active",f.animate("100ms ease-in")),f.transition("active => inactive",f.animate("100ms ease-out"))]),f.trigger("menuItem",[f.state("inactive",f.style({height:"48px"})),f.state("active",f.style({height:"100px"})),f.transition("inactive => active",f.animate("100ms ease-in")),f.transition("active => inactive",f.animate("100ms ease-out"))])],styles:[".active{background:rgba(0,0,0,.15)}.mat-list-item.active mat-icon{color:#0072ae}a.mat-list-item.child{margin-right:20px}#clearUserMenuItem{position:absolute;left:13px;top:13px}"]}]}],t.ctorParameters=function(){return[{type:n.Store},{type:h.SigninService},{type:St}]},t.propDecorators={closeSidebar:[{type:e.Output}],authenticated:[{type:e.Input}],customerMobileInput:[{type:e.ViewChild,args:["customerMobileInput",{static:!1}]}]},t}();var _t=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:e.Component,args:[{selector:"app-search-box",template:'<div class="search-box">\r\n  \x3c!--<td-search-box class="search-box-container" backIcon="arrow_back" placeholder="جستجو" [showUnderline]="false" [debounce]="500" [alwaysVisible]="false"\r\n                 (searchDebounce)="searchInputTerm = $event" (search)="searchInputTerm = $event" (clear)="searchInputTerm = \'\'">\r\n  </td-search-box>--\x3e\r\n</div>',styles:[""]}]}],t.ctorParameters=function(){return[]},t}(),At=function(){function t(t){this.sdf=t}return t.decorators=[{type:e.Component,args:[{selector:"app-logo-container",template:"\r\n\x3c!--<img class=\"logoTypeAnimation\" src='../../../assets/images/logo-type.png' />--\x3e",styles:[".logoAnimation{height:36px;cursor:pointer;z-index:2}#background{position:absolute;top:0;right:0;width:300px;height:70px}"]}]}],t.ctorParameters=function(){return[{type:St}]},t}();var Mt=function(){function t(t,e,o,n){var a=this;this.document=t,this._location=e,this.store=o,this.configurationService=n,this.toolbarAnimationState="compact",this.menuAnimationState="compact",this.logoAnimationState="compact",this.titleAnimationState="compact",this.anchorsMode=!1,this.user$=this.store.select(y.getAccountInfo),this.store.dispatch(new K),this.config$=this.store.select(ht),this.config$.subscribe((function(t){return a.config=t})),this.lastScroll=this.document.body.scrollTop,this.showSecondSidenav=this.store.select(pt),this.showMainSidenav=this.store.select(mt),this.store.select(gt).subscribe((function(t){setTimeout((function(){return a.menuAnimationState=t}),1),setTimeout((function(){return a.logoAnimationState=t}),1),setTimeout((function(){return a.titleAnimationState=t}),1),setTimeout((function(){return a.toolbarAnimationState=t}),1)})),this._observe_on_layout_config_and_filter_routes(),v.fromEvent(this.document.body,"scroll").subscribe((function(){var t=a.document.body.scrollTop,e=t-a.lastScroll<0&&a.document.body.scrollHeight-t<300;if(a.lastScroll=a.document.body.scrollTop,a.config.visibility)if(0==t){if("comfortable"==a.config.mode)return;a.store.dispatch(new K)}else if(t<200||e){if("compact"==a.config.mode)return;a.store.dispatch(new J)}else{if("summary"==a.config.mode)return;a.store.dispatch(new Q)}}))}return t.prototype.onWindowScroll=function(){},t.prototype.signout=function(){this.store.dispatch(new U)},t.prototype.goback=function(){this._location.back()},t.prototype.toggleSecondSidebar=function(){var t;this.showSecondSidenav.subscribe((function(e){t=e?new q:new G})),this.store.dispatch(t)},t.prototype.toggleMainSidebar=function(){var t;this.showMainSidenav.subscribe((function(e){t=e?new j:new R})),this.store.dispatch(t)},t.prototype._observe_on_layout_config_and_filter_routes=function(){this.menuItems$=this.configurationService.config$.pipe(b.map((function(t){return t.menuItems})),b.combineLatest(this.user$),b.map(this.configurationService.config$.getValue().menu_item_authorization_operator))},t.decorators=[{type:e.Component,args:[{selector:"layout-toolbar",template:'<mat-toolbar [@toolbarAnimation]="toolbarAnimationState">\r\n  <mat-toolbar-row id="firstToolbar">\r\n    \x3c!-- <div id="background"></div> --\x3e\r\n    <img [@logoAnimation]="logoAnimationState" id="logo" routerLink=\'/\' src=\'assets/images/shatel-logo.png\' />\r\n\r\n    <button type="button" *ngIf=\'showSidebarMenu && false\' (click)="toggleMainSidebar()" mat-icon-button fxFlex="nogrow" fxLayoutAlign="center center">\r\n      <mat-icon>menu</mat-icon>\r\n    </button>\r\n    <span [@titleAnimation]="titleAnimationState" id=\'app-name\'>\r\n      {{app_config?.Config.AppTitle}}\r\n    </span>\r\n    <app-title fxFlex fxLayoutAlign="start center"></app-title>\r\n    <app-search-box fxFlex fxLayoutAlign="end center"></app-search-box>\r\n\r\n\r\n    <button *ngIf="!displayName" mat-button routerLink="auth/signin">\r\n      ورود\r\n    </button>\r\n    <button *ngIf="!displayName" mat-button routerLink="auth/signup">\r\n      ثبت نام\r\n    </button>\r\n    <button *ngIf="displayName" mat-icon-button [matMenuTriggerFor]="toolbarMenu1">\r\n      <mat-icon>account_circle</mat-icon>\r\n    </button>\r\n    <mat-menu #toolbarMenu1 class="rtl-dir">\r\n      <div id="acccountName">\r\n        {{displayName}}\r\n      </div>\r\n      <button routerLink=\'/user/panel\' mat-menu-item class="rtl-dir">\r\n        <mat-icon>fingerprint</mat-icon>\r\n        <span>\r\n          مدیریت کاربری\r\n        </span>\r\n      </button>\r\n      <button (click)=\'signout()\' mat-menu-item class="rtl-dir">\r\n        <mat-icon>exit_to_app</mat-icon>\r\n        <span>خروج</span>\r\n      </button>\r\n    </mat-menu>\r\n    <button mat-icon-button type="button" (click)="toggleSecondSidebar()" fxFlex="nogrow" fxLayoutAlign="center center">\r\n      <mat-icon>notifications</mat-icon>\r\n    </button>\r\n    <button mat-icon-button (click)=\'goback()\'>\r\n      <mat-icon>arrow_back</mat-icon>\r\n    </button>\r\n\r\n  </mat-toolbar-row>\r\n  <mat-toolbar-row>\r\n    <div id="secondToolbar" [@menuAnimation]="menuAnimationState">\r\n      <router-outlet name="ngs-layout-before-toolbar-menu"></router-outlet>\r\n      <button mat-button *ngFor="let menu of menuItems$ | async" routerLinkActive="active" [routerLink]="[menu.route]">\r\n        \x3c!-- <mat-icon mat-list-icon>{{menu.icon}}</mat-icon> --\x3e\r\n        <span>{{menu.title}}</span>\r\n      </button>\r\n      <router-outlet name="ngs-layout-after-toolbar-menu"></router-outlet>\r\n    </div>\r\n  </mat-toolbar-row>\r\n</mat-toolbar>',animations:[f.trigger("logoAnimation",[f.state("comfortable",f.style({width:"90px",height:"90px",top:"50px",right:"calc(50% - 50px)"})),f.state("compact",f.style({width:"36px",height:"36px",top:"13px",right:"13px"})),f.state("summary",f.style({width:"36px",height:"36px",top:"76px",right:"10px"})),f.state("hide",f.style({width:"0",height:"0",top:"76px",right:"10px"})),f.transition("comfortable => compact",f.animate("800ms ease-out")),f.transition("comfortable => hide",f.animate("800ms ease-in")),f.transition("hide => comfortable",f.animate("800ms ease-in")),f.transition("compact => hide",f.animate("800ms ease-in")),f.transition("hide => compact",f.animate("800ms ease-in")),f.transition("summary => hide",f.animate("800ms ease-in")),f.transition("hide => summary",f.animate("800ms ease-in")),f.transition("summary => compact",f.animate("400ms ease-out")),f.transition("summary => comfortable",f.animate("800ms ease-out")),f.transition("compact => comfortable",f.animate("800ms ease-out")),f.transition("compact => summary",f.animate("400ms ease-out"))]),f.trigger("menuAnimation",[f.state("comfortable",f.style({right:"50%",transform:"translateX(50%)",bottom:"25px"})),f.state("compact",f.style({right:"45px",transform:"translateX(0)",bottom:"13px"})),f.state("summary",f.style({right:"75px",transform:"translateX(0)",bottom:"14px"})),f.state("hide",f.style({right:"75px",transform:"translateX(0)",bottom:"14px"})),f.transition("comfortable => compact",f.animate("800ms ease-in")),f.transition("comfortable => hide",f.animate("400ms ease-in")),f.transition("hide => comfortable",f.animate("600ms ease-in")),f.transition("compact => hide",f.animate("400ms ease-in")),f.transition("hide => compact",f.animate("600ms ease-in")),f.transition("summary => hide",f.animate("400ms ease-in")),f.transition("hide => summary",f.animate("600ms ease-in")),f.transition("summary => compact",f.animate("400ms ease-out")),f.transition("summary => comfortable",f.animate("800ms ease-out")),f.transition("compact => comfortable",f.animate("800ms ease-out")),f.transition("compact => summary",f.animate("400ms ease-in"))]),f.trigger("titleAnimation",[f.state("comfortable",f.style({"margin-right":"0px","font-size":"larger","font-weight":"bolder",transform:"translateX(50%)",right:"calc(50%)",bottom:"75px",position:"absolute",padding:0})),f.state("compact",f.style({"margin-right":"0px","font-size":"16px","font-weight":"bolder",transform:"translateX(0)",right:"60px",bottom:"79px",position:"absolute",padding:0})),f.state("summary",f.style({"margin-right":"0px","font-size":"16px","font-weight":"bolder",transform:"translateX(0)",right:"60px",bottom:"79px",position:"absolute",padding:0})),f.state("hide",f.style({"margin-right":"0px","font-size":"1px","font-weight":"bolder",transform:"translateX(0)",right:"60px",bottom:"79px",position:"absolute",padding:0})),f.transition("comfortable => compact",f.animate("850ms ease-out")),f.transition("comfortable => hide",f.animate("800ms ease-in")),f.transition("hide => comfortable",f.animate("800ms ease-in")),f.transition("compact => hide",f.animate("800ms ease-in")),f.transition("hide => compact",f.animate("800ms ease-in")),f.transition("summary => hide",f.animate("800ms ease-in")),f.transition("hide => summary",f.animate("800ms ease-in")),f.transition("summary => compact",f.animate("400ms ease-out")),f.transition("summary => comfortable",f.animate("800ms ease-out")),f.transition("compact => comfortable",f.animate("800ms ease-out")),f.transition("compact => summary",f.animate("400ms ease-in"))]),f.trigger("toolbarAnimation",[f.state("comfortable",f.style({backgroundColor:"rgba(256,256,256,1)",color:"rgba(30,30,30,1)",height:"33vh",top:"0",boxShadow:"1px 1px 3px rgba(0,0,0,0)"})),f.state("compact",f.style({backgroundColor:"rgba(256,256,256,1)",height:"128px",top:"0",boxShadow:"1px 1px 3px rgba(0,0,0,0.5)"})),f.state("summary",f.style({backgroundColor:"rgba(256,256,256,1)",height:"128px",top:"-64px",boxShadow:"1px 1px 3px rgba(0,0,0,0.5)"})),f.state("hide",f.style({backgroundColor:"rgba(256,256,256,1)",height:"128px",top:"-128px",boxShadow:"1px 1px 3px rgba(0,0,0,0.5)"})),f.transition("comfortable => compact",f.animate("800ms ease-in")),f.transition("comfortable => hide",f.animate("800ms ease-in")),f.transition("hide => comfortable",f.animate("800ms ease-in")),f.transition("compact => hide",f.animate("800ms ease-in")),f.transition("hide => compact",f.animate("800ms ease-in")),f.transition("summary => hide",f.animate("800ms ease-in")),f.transition("hide => summary",f.animate("800ms ease-in")),f.transition("summary => compact",f.animate("400ms ease-out")),f.transition("summary => comfortable",f.animate("800ms ease-out")),f.transition("compact => comfortable",f.animate("800ms ease-out")),f.transition("compact => summary",f.animate("400ms ease-in"))])],styles:["mat-toolbar{background-color:#fff!important;top:0;box-shadow:rgba(0,0,0,.5) 1px 1px 3px!important}#secondToolbar{transition:none;position:absolute}#secondToolbar button{opacity:.6;font-family:iran-sans-bold,sans-serif!important;font-size:.65em!important}#secondToolbar.active{opacity:1}#logo{transition:none;position:absolute}#app-name{padding-right:8px;font-family:iran-sans-bold,sans-serif!important}button.rtl-dir{direction:rtl!important}#acccountName{display:block;text-align:right;padding-right:20px;font-size:14px;font-weight:bolder}"]}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[a.DOCUMENT]}]},{type:a.Location},{type:n.Store},{type:St}]},t.propDecorators={showSidebarMenu:[{type:e.Input}],app_config:[{type:e.Input,args:["app-config"]}],user:[{type:e.Input}],displayName:[{type:e.Input}],onWindowScroll:[{type:e.HostListener,args:["body:scroll",[]]}]},t}();var Et=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:e.Component,args:[{selector:"app-footer",template:'<div fxLayoutAlign="center center" class="footer-text">\r\n    {{app_config?.Config.FooterCopyright}}\r\n</div>',styles:[":host{border-top:1px solid #e5e5e5;padding:8px;overflow:hidden}.footer-text{position:relative;top:12px}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={app_config:[{type:e.Input,args:["app-config"]}]},t}();var Lt=function(){function t(t,e){var o=this;this.store=t,this.router=e,this.mapper=[],this.title$=this.store.select(ct),this.router.events.subscribe((function(t){if(t instanceof i.NavigationEnd){var e="";o.mapper.forEach((function(o){var n=o(t);return!!n&&(e=n,!0)})),o.store.dispatch(new P(""+e||""))}}))}return t.decorators=[{type:e.Component,args:[{selector:"app-title",template:'<div id="title">\r\n    {{title$ | async}}\r\n</div>',styles:["#title{margin-right:-30px;font-weight:bolder;font-size:13px;padding:18px 40px}"]}]}],t.ctorParameters=function(){return[{type:n.Store},{type:i.Router}]},t}();var wt=function(){function t(t,e,o,n,a){var r=this;this.store=t,this.router=e,this.configService=o,this.translateService=n,this.userFacadeService=a,this.showSidebarMenu=new S.BehaviorSubject(!0),this.width=100,this._set_i18n_resource(),this.configService.config$.subscribe((function(t){r.theme=t.theme,r.theme_A="theme_A"==t.theme,r.theme_B="theme_B"==t.theme})),this.store.dispatch(new k("push")),this.user$=this.store.select((function(t){return t.user.user.data})),this.displayName$=this.userFacadeService.getDisplayName(),this.showMainSidenav=this.store.select(mt),this.mainSidenavMode=this.store.select(ut),this.toolbarAnimationState=this.store.select(gt),this.isFullscreen$=this.store.select(ft),this.mode$=this.isFullscreen$.map((function(t){return t?"invisible":"visible"})),this.store.dispatch(new $("push")),this.showSecondSidenav=this.store.select(pt),this.secondSidenavMode=this.store.select(dt),this.layoutMode=this.store.select(lt),this.router.events.filter((function(t){return t instanceof i.NavigationEnd})).subscribe((function(t){["/auth/signin"==t.urlAfterRedirects,"/auth/signup/register"==t.urlAfterRedirects,"/auth/signup/verification"==t.urlAfterRedirects,"/user/password/reset"==t.urlAfterRedirects].some((function(t){return t}))?r.showSidebarMenu.next(!1):r.showSidebarMenu.next(!0)}))}return t.prototype.onSecondSidebarClosedStart=function(){this.store.dispatch(new q)},t.prototype.onSidebarClosedStart=function(){this.store.dispatch(new j)},t.prototype._set_i18n_resource=function(){this.translateService.setTranslation("en",{__signin:"Signin",__signup:"Signup",__account_mangement:"Account",__signout:"Signout"}),this.translateService.setTranslation("fa",{__signin:"ورود",__signup:"ثبت نام",__account_mangement:"مدیریت کاربری",__signout:"خروج"})},t.decorators=[{type:e.Component,args:[{selector:"layout-main",template:'<div #mainSideNav [ngClass]="toolbarAnimationState | async" [class.fullscreen]="isFullscreen$ | async">\r\n  \x3c!-- <mat-progress-bar *ngIf=\'progressStatus$ | async\' color="primary" mode="query"></mat-progress-bar> --\x3e\r\n  <layout-toolbar  *ngIf="theme == \'theme_A\'" [user]="user$ | async" [displayName]="displayName$ | async" [showSidebarMenu]=\'showSidebarMenu | async\' [app-config]="app_config"></layout-toolbar>\r\n  <layout-toolbar-b *ngIf="theme == \'theme_B\'" [user]="user$ | async" [displayName]="displayName$ | async" [showSidebarMenu]=\'showSidebarMenu | async\' [app-config]="app_config"></layout-toolbar-b>\r\n  \r\n  <mat-sidenav-container id="layout-sidnav" [className]="layoutMode | async">\r\n    <mat-sidenav [mode]="mainSidenavMode | async" [opened]=\'showMainSidenav | async\' #sidebar (closedStart)="onSidebarClosedStart()">\r\n      <mat-nav-list>\r\n        <ngs-layout-main-menu [authenticated]=\'showSidebarMenu\' (closeSidebar)="sidebar.close()" (click)="onSecondSidebarClosedStart()"></ngs-layout-main-menu>\r\n      </mat-nav-list>\r\n    </mat-sidenav>\r\n    \x3c!-- <mat-sidenav [mode]="secondSidenavMode | async" [opened]=\'showSecondSidenav | async\' (closedStart)="onSecondSidebarClosedStart()"\r\n      position="end" #second_sidebar class="second_sidebar">\r\n      <mat-nav-list fxLayout=\'column\'>\r\n      </mat-nav-list>\r\n    </mat-sidenav> --\x3e\r\n    <div fxFlexLayout=\'column\' id="app-main-container" fxLayoutAlign=\'center center\'>\r\n      <div fxFlex=\'0 0 100\'>\r\n        <router-outlet></router-outlet>\r\n        <footer [@mode]="mode$ | async" ruleAnchor="layout_footer">\r\n          <router-outlet name="footer_A"></router-outlet>\r\n          <router-outlet name="footer_B"></router-outlet>\r\n          <app-footer [app-config]="app_config"></app-footer>\r\n        </footer>\r\n      </div>\r\n    </div>\r\n  </mat-sidenav-container>\r\n</div>',animations:[f.trigger("mode",[f.state("visible",f.style({transform:"scaleY(1) translateY(0)"})),f.state("invisible",f.style({height:"0",transform:"scaleY(0) translateY(100%)"})),f.transition("visible => invisible",[f.animate("1000ms")]),f.transition("invisible => visible",[f.animate("1000ms")])])],styles:["#purchase-fab-button{position:fixed;bottom:23px;left:31px}md-progress-bar{position:absolute!important}.with-margin #app-main-container{margin-top:25px;padding-right:25px;padding-left:25px}.second_sidebar{width:380px}.more-detail{margin:8px;box-sizing:border-box;padding:10px;text-align:center;width:96%;border:1px solid #dedede;outline:0;cursor:pointer;transition:.3s}.more-detail:hover{background:#eee}footer{border-top:1px solid #e5e5e5;margin-top:25px;background-color:#f1f1f1}"]}]}],t.ctorParameters=function(){return[{type:n.Store},{type:i.Router},{type:St},{type:l.TranslateService},{type:y.UserFacadeService}]},t.propDecorators={app_config:[{type:e.Input,args:["app-config"]}],mainSideNav:[{type:e.ViewChild,args:["mainSideNav",{static:!1}]}],theme_A:[{type:e.HostBinding,args:["class.theme_A"]}],theme_B:[{type:e.HostBinding,args:["class.theme_B"]}]},t}();var Ot=function(){function t(t,e,o){this.actions$=t,this.router=e,this.store=o,this.DoSignout$=this.actions$.pipe(m.ofType(D.DO_SIGNOUT),b.map((function(){return new h.DoSignoutAction}))),this.fullscreen$=this.actions$.pipe(m.ofType(D.FULLSCREEN),b.map((function(){return new ot}))),this.exit_fullscreen$=this.actions$.pipe(m.ofType(D.EXIT_FULLSCREEN),b.map((function(){return new et}))),this.fullscren_toolbar$=this.actions$.pipe(m.ofType(D.TOGGLE_FULLSCREEN),b.withLatestFrom(this.store.select(ft)),b.map((function(t){var e=N(t,2);e[0];return e[1]?new H:new V})))}return t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:m.Actions},{type:i.Router},{type:n.Store}]},O([m.Effect(),C("design:type",Object)],t.prototype,"DoSignout$",void 0),O([m.Effect(),C("design:type",Object)],t.prototype,"fullscreen$",void 0),O([m.Effect(),C("design:type",Object)],t.prototype,"exit_fullscreen$",void 0),O([m.Effect(),C("design:type",Object)],t.prototype,"fullscren_toolbar$",void 0),t}();var Ct=function(){function t(t,e,o,n,a){var i=this;this.document=t,this._location=e,this.store=o,this.translateService=n,this.configurationService=a,this.toolbarAnimationState="compact",this.menuAnimationState="compact",this.logoAnimationState="compact",this.titleAnimationState="compact",this.anchorsMode=!1,this.user$=this.store.select(y.getAccountInfo),this.store.dispatch(new K),this.config$=this.store.select(ht),this.config$.subscribe((function(t){return i.config=t})),this.lastScroll=this.document.body.scrollTop,this.showSecondSidenav=this.store.select(pt),this.showMainSidenav=this.store.select(mt),this.store.select(gt).subscribe((function(t){setTimeout((function(){return i.menuAnimationState=t}),1),setTimeout((function(){return i.logoAnimationState=t}),1),setTimeout((function(){return i.titleAnimationState=t}),1),setTimeout((function(){return i.toolbarAnimationState=t}),1)})),this._observe_on_layout_config_and_filter_routes(),v.fromEvent(this.document.body,"scroll").subscribe((function(){var e=i.document.body.scrollTop,o=e-i.lastScroll<0&&i.document.body.scrollHeight-t.body.offsetHeight-e>300;if(i.lastScroll=e,i.config.visibility)if(0==e){if("comfortable"==i.config.mode)return;i.store.dispatch(new K)}else if(e<150||o){if("compact"==i.config.mode)return;i.store.dispatch(new J)}else{if("summary"==i.config.mode)return;i.store.dispatch(new Q)}}))}return t.prototype.onWindowScroll=function(){},t.prototype.signout=function(){this.store.dispatch(new U)},t.prototype.goback=function(){this._location.back()},t.prototype.toggleSecondSidebar=function(){var t;this.showSecondSidenav.subscribe((function(e){t=e?new q:new G})),this.store.dispatch(t)},t.prototype.toggleMainSidebar=function(){var t;this.showMainSidenav.subscribe((function(e){t=e?new j:new R})),this.store.dispatch(t)},t.prototype._observe_on_layout_config_and_filter_routes=function(){this.menuItems$=this.configurationService.config$.pipe(b.map((function(t){return t.menuItems})),b.combineLatest(this.user$),b.map(this.configurationService.config$.getValue().menu_item_authorization_operator))},t.decorators=[{type:e.Component,args:[{selector:"layout-toolbar-b",template:'<mat-toolbar dir="rtl" color="primary" [@toolbarAnimation]="toolbarAnimationState">\r\n  <mat-toolbar-row dir="rtl" id="firstToolbar">\r\n    \x3c!-- <div id="background"></div> --\x3e\r\n    <img [@logoAnimation]="logoAnimationState" id="logo" routerLink=\'/\' src=\'assets/logos/logo-type.png\' />\r\n\r\n    <button type="button" *ngIf=\'showSidebarMenu && false\' (click)="toggleMainSidebar()" mat-icon-button fxFlex="nogrow"\r\n      fxLayoutAlign="center center">\r\n      <mat-icon>menu</mat-icon>\r\n    </button>\r\n    <span [@titleAnimation]="titleAnimationState" id=\'app-name\'>\r\n      {{app_config?.Config.AppTitle}}\r\n    </span>\r\n    <app-title fxFlex fxLayoutAlign="start center"></app-title>\r\n    <app-search-box fxFlex fxLayoutAlign="end center"></app-search-box>\r\n\r\n\r\n    <button *ngIf="!displayName" mat-button routerLink="auth/signin">\r\n      <span [translate]="\'__signin\'"></span>\r\n    </button>\r\n    <button translate *ngIf="!displayName" mat-button routerLink="auth/signup">\r\n      {{\'__signup\' | translate}}\r\n    </button>\r\n    <button *ngIf="displayName" mat-icon-button [matMenuTriggerFor]="toolbarMenu1">\r\n      <mat-icon>account_circle</mat-icon>\r\n    </button>\r\n    <mat-menu #toolbarMenu1 class="rtl-dir">\r\n      <div id="acccountName">\r\n        {{displayName}}\r\n      </div>\r\n      <button routerLink=\'/user/panel\' mat-menu-item class="rtl-dir">\r\n        <mat-icon>fingerprint</mat-icon>\r\n        <span translate="__account_mangement">\r\n        </span>\r\n      </button>\r\n      <button (click)=\'signout()\' mat-menu-item class="rtl-dir">\r\n        <mat-icon>exit_to_app</mat-icon>\r\n        <span translate>__signout</span>\r\n      </button>\r\n    </mat-menu>\r\n    <button mat-icon-button type="button" (click)="toggleSecondSidebar()" fxFlex="nogrow" fxLayoutAlign="center center">\r\n      <mat-icon>notifications</mat-icon>\r\n    </button>\r\n    <button mat-icon-button (click)=\'goback()\'>\r\n      <mat-icon>arrow_back</mat-icon>\r\n    </button>\r\n\r\n  </mat-toolbar-row>\r\n  <mat-toolbar-row>\r\n    <div id="secondToolbar" [@menuAnimation]="menuAnimationState">\r\n      <router-outlet name="ngs-layout-before-toolbar-menu"></router-outlet>\r\n      <button mat-button *ngFor="let menu of menuItems$ | async" [routerLink]="menu.route" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">\r\n        \x3c!-- <mat-icon mat-list-icon>{{menu.icon}}</mat-icon> --\x3e\r\n        <span>{{menu.title}}</span>\r\n      </button>\r\n      <router-outlet name="ngs-layout-after-toolbar-menu"></router-outlet>\r\n    </div>\r\n  </mat-toolbar-row>\r\n</mat-toolbar>',animations:[f.trigger("logoAnimation",[f.state("comfortable",f.style({height:"48px",top:"50px",right:"calc(50% - 50px)"})),f.state("compact",f.style({height:"36px",top:"13px",right:"13px"})),f.state("summary",f.style({height:"36px",top:"57px",right:"10px"})),f.state("hide",f.style({width:"0",height:"0",top:"57px",right:"10px"})),f.transition("comfortable => compact",f.animate("800ms ease-out")),f.transition("comfortable => hide",f.animate("800ms ease-in")),f.transition("hide => comfortable",f.animate("800ms ease-in")),f.transition("compact => hide",f.animate("800ms ease-in")),f.transition("hide => compact",f.animate("800ms ease-in")),f.transition("summary => hide",f.animate("800ms ease-in")),f.transition("hide => summary",f.animate("800ms ease-in")),f.transition("summary => compact",f.animate("400ms ease-out")),f.transition("summary => comfortable",f.animate("800ms ease-out")),f.transition("compact => comfortable",f.animate("800ms ease-out")),f.transition("compact => summary",f.animate("400ms ease-out"))]),f.trigger("menuAnimation",[f.state("comfortable",f.style({right:"50%",transform:"translateX(50%)",bottom:"0"})),f.state("compact",f.style({right:"50%",transform:"translateX(50%)",bottom:"0"})),f.state("summary",f.style({right:"165px",transform:"translateX(0)",bottom:"0"})),f.state("hide",f.style({right:"165px",transform:"translateX(0)",bottom:"0"})),f.transition("comfortable => compact",f.animate("800ms ease-in-out")),f.transition("comfortable => hide",f.animate("400ms ease-in-out")),f.transition("hide => comfortable",f.animate("600ms ease-in-out")),f.transition("compact => hide",f.animate("400ms ease-in-out")),f.transition("hide => compact",f.animate("600ms ease-in-out")),f.transition("summary => hide",f.animate("400ms ease-in-out")),f.transition("hide => summary",f.animate("600ms ease-in-out")),f.transition("summary => compact",f.animate("400ms ease-out")),f.transition("summary => comfortable",f.animate("800ms ease-out")),f.transition("compact => comfortable",f.animate("800ms ease-out")),f.transition("compact => summary",f.animate("400ms ease-in-out"))]),f.trigger("titleAnimation",[f.state("comfortable",f.style({"margin-right":"0px","font-size":"larger","font-weight":"bolder",transform:"translateX(50%)",right:"calc(50%)",bottom:"165px",position:"absolute",padding:0})),f.state("compact",f.style({"margin-right":"0px","font-size":"16px","font-weight":"bolder",right:"50%",transform:"translateX(50%)",bottom:"51px",position:"absolute",padding:0})),f.state("summary",f.style({"margin-right":"0px","font-size":"16px","font-weight":"bolder",transform:"translateX(50%)",right:"50%",bottom:"79px",position:"absolute",padding:0})),f.state("hide",f.style({"margin-right":"0px","font-size":"1px","font-weight":"bolder",bottom:"79px",position:"absolute",padding:0})),f.transition("comfortable => compact",f.animate("850ms ease-out")),f.transition("comfortable => hide",f.animate("800ms ease-in")),f.transition("hide => comfortable",f.animate("800ms ease-in")),f.transition("compact => hide",f.animate("800ms ease-in")),f.transition("hide => compact",f.animate("800ms ease-in")),f.transition("summary => hide",f.animate("800ms ease-in")),f.transition("hide => summary",f.animate("800ms ease-in")),f.transition("summary => compact",f.animate("400ms ease-out")),f.transition("summary => comfortable",f.animate("800ms ease-out")),f.transition("compact => comfortable",f.animate("800ms ease-out")),f.transition("compact => summary",f.animate("400ms ease-in"))]),f.trigger("toolbarAnimation",[f.state("comfortable",f.style({backgroundColor:"rgba(256,256,256,1)",color:"rgba(30,30,30,1)",height:"33vh",top:"0"})),f.state("compact",f.style({height:"100px",top:"0"})),f.state("summary",f.style({height:"100px",top:"-50px"})),f.state("hide",f.style({height:"100px",top:"-100px"})),f.transition("comfortable => compact",f.animate("800ms ease-in")),f.transition("comfortable => hide",f.animate("800ms ease-in")),f.transition("hide => comfortable",f.animate("800ms ease-in")),f.transition("compact => hide",f.animate("800ms ease-in")),f.transition("hide => compact",f.animate("800ms ease-in")),f.transition("summary => hide",f.animate("800ms ease-in")),f.transition("hide => summary",f.animate("800ms ease-in")),f.transition("summary => compact",f.animate("400ms ease-out")),f.transition("summary => comfortable",f.animate("800ms ease-out")),f.transition("compact => comfortable",f.animate("800ms ease-out")),f.transition("compact => summary",f.animate("400ms ease-in"))])],styles:["#secondToolbar{transition:none;position:absolute}#secondToolbar button{opacity:.6;font-family:iran-sans-bold,sans-serif!important;font-size:.65em!important;height:50px!important;border-radius:0!important}#secondToolbar button.active{border-bottom:2px solid #ff7400;opacity:1}#logo{transition:none;position:absolute}#app-name{padding-right:8px;font-family:iran-sans-bold,sans-serif!important}button.rtl-dir{direction:rtl!important}#acccountName{display:block;text-align:right;padding-right:20px;font-size:14px;font-weight:bolder}"]}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[a.DOCUMENT]}]},{type:a.Location},{type:n.Store},{type:l.TranslateService},{type:St}]},t.propDecorators={showSidebarMenu:[{type:e.Input}],app_config:[{type:e.Input,args:["app-config"]}],user:[{type:e.Input}],displayName:[{type:e.Input}],onWindowScroll:[{type:e.HostListener,args:["body:scroll",[]]}]},t}();var Nt=function(){function t(){}return t.forRoot=function(t){return{ngModule:It,providers:[{provide:e.LOCALE_ID,useValue:"en en-US"},{provide:vt,useValue:t}]}},t.decorators=[{type:e.NgModule,args:[{imports:[a.CommonModule,o.BrowserModule,i.RouterModule,r.FormsModule,s.HttpClientModule,c.FlexLayoutModule,u.MatIconModule,u.MatButtonModule,u.MatCardModule,u.MatSnackBarModule,u.MatSidenavModule,u.MatExpansionModule,u.MatSelectModule,u.MatFormFieldModule,u.MatListModule,u.MatMenuModule,u.MatRadioModule,u.MatInputModule,u.MatToolbarModule,u.MatDatepickerModule,u.MatProgressBarModule,i.RouterModule,l.TranslateModule,p.NgsConfigModule,L.RuleModule],declarations:[xt,_t,At,Mt,Ct,Et,Lt,wt],exports:[xt,_t,At,Mt,Ct,Et,Lt,wt]}]}],t}(),It=function(){function t(){window.___starter=window.___starter||{},window.___starter.layout="8.0.10"}return t.decorators=[{type:e.NgModule,args:[{imports:[Nt,n.StoreModule.forFeature("layout",it),m.EffectsModule.forFeature([Ot])],exports:[Nt]}]}],t.ctorParameters=function(){return[]},t}();t.ChangeLayout=F,t.ChangeSecondSidenavMode=$,t.ChangeSideNavMode=k,t.ChangeToolbatToComfortableModeAction=K,t.ChangeToolbatToCompactModeAction=J,t.CloseSecondSidenavAction=q,t.CloseSidenavAction=j,t.DisableComfortableModeAction=tt,t.EnableComfortableModeAction=Z,t.ExitFullscreenAction=H,t.FullscreenAction=V,t.InvisibleToolbarAction=ot,t.LayoutActionTypes=D,t.LayoutOutlets={ngs_layout_toolbar_menu:"ngs-layout-after-toolbar-menu",ngs_layout_after_toolbar_menu:"ngs-layout-after-toolbar-menu",ngs_layout_before_toolbar_menu:"ngs-layout-before-toolbar-menu",footer_B:"footer_B",footer_A:"footer_A"},t.MODULE_CONFIG_TOKEN=vt,t.MODULE_DEFAULT_CONFIG=yt,t.NgsLayoutMainComponent=wt,t.NgsLayoutModule=Nt,t.OpenSecondSidenavAction=G,t.OpenSidenavAction=R,t.RootNgsLayoutModule=It,t.TitleChangedAction=P,t.ToggleFullscreenAction=X,t.VisibleToolbarAction=et,t.ɵa=xt,t.ɵc=St,t.ɵd=_t,t.ɵe=At,t.ɵf=Mt,t.ɵg=Ct,t.ɵh=Et,t.ɵi=Lt,t.ɵj=it,t.ɵl=Y,t.ɵm=at,t.ɵn=Ot,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=soushians-layout.umd.min.js.map