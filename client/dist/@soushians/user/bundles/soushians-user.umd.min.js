!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("@angular/forms"),require("@angular/common/http"),require("@angular/flex-layout"),require("@angular/platform-browser/animations"),require("@angular/material"),require("@ngrx/store"),require("@ngrx/effects"),require("@soushians/form"),require("rxjs/operators"),require("rxjs"),require("@soushians/shared"),require("@soushians/authentication"),require("rxjs/BehaviorSubject"),require("@soushians/config"),require("rxjs/Observable")):"function"==typeof define&&define.amd?define("@soushians/user",["exports","@angular/core","@angular/common","@angular/router","@angular/forms","@angular/common/http","@angular/flex-layout","@angular/platform-browser/animations","@angular/material","@ngrx/store","@ngrx/effects","@soushians/form","rxjs/operators","rxjs","@soushians/shared","@soushians/authentication","rxjs/BehaviorSubject","@soushians/config","rxjs/Observable"],e):e(((t=t||self).soushians=t.soushians||{},t.soushians.user={}),t.ng.core,t.ng.common,t.ng.router,t.ng.forms,t.ng.common.http,t.ng["flex-layout"],t.ng.platformBrowser.animations,t.ng.material,t.store,t.effects,t.form,t.rxjs.operators,t.rxjs,t.shared,t.authentication,t.rxjs.BehaviorSubject,t.config,t.rxjs.Observable)}(this,(function(t,e,r,n,o,i,a,s,u,c,p,f,l,d,m,h,E,y,g){"use strict";var S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var R=function(){return(R=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function x(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function v(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function b(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}var _=function(){this.Roles=[],this.Groups=[]};var I={server:"frontend_server",env:{production:!1,frontend_server:"user/module/frontend/server/did/not/set",server:"user/module/server/did/not/set"},endpoints:{changePassword:"",editProfile:"",getAccountInfo:"",profileInformation:""},forms:{profile_edit:""},dashboardLinks:[],responseToUserInfo:function(t){return t},mapUserDisplayName:function(t){return t.pipe(l.map((function(t){return t.Username})))}},A=new e.InjectionToken("UserModuleConfig"),P=function(){function t(t,e){var r=this;this.store=e,this.config$=new E.BehaviorSubject(this._config),this._config=Object.assign({},I,t),this.config$.next(this._config),this.store.select(y.getUserModuleConfig).subscribe((function(t){t&&(r._config=Object.assign({},r._config,t.Config),r.config$.next(r._config))}))}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[A]}]},{type:c.Store}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(A),e.ɵɵinject(c.Store))},token:t,providedIn:"root"}),t}();var F={GET_PROFILE:"[USER][PROFILE] GET_PROFILE",GET_PROFILE_START:"[USER][PROFILE] GET_PROFILE_START",GET_PROFILE_SUCCEED:"[USER][PROFILE] GET_PROFILE_SUCCEED",GET_PROFILE_FAILED:"[USER][PROFILE] GET_PROFILE_FAILED"},w=function(){this.type=F.GET_PROFILE};var D=function(){this.type=F.GET_PROFILE_START};var O=function(t){this.payload=t,this.type=F.GET_PROFILE_SUCCEED};var L=function(){this.type=F.GET_PROFILE_FAILED};var T={USER_SELECTED:"[USER] USER_SELECTED",REFRESH_USER_INFO:"[USER] REFRESH_USER_INFO"};var C=function(t){this.payload=t,this.type=T.REFRESH_USER_INFO};var U={loaded:!1,data:new _};function G(t,e){switch(void 0===t&&(t=U),e.type){case T.USER_SELECTED:case T.REFRESH_USER_INFO:return R({},t,{loaded:!0,data:e.payload});default:return t}}var j,k,$=function(t){return t.data};!function(t){var e=function(){function t(t){var e=this;Object.keys(t).forEach((function(r){return e[r]=t[r]}))}return t.prototype.getRequestBody=function(){return{}},Object.defineProperty(t,"formGroup",{get:function(){return new o.FormGroup({Username:new o.FormControl("",[o.Validators.minLength(8),o.Validators.required])})},enumerable:!0,configurable:!0}),t}();t.Request=e;var r=function(t){function e(){return t.call(this)||this}return function(t,e){function r(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(_);t.Response=r}(j||(j={})),function(t){var e=function(){function t(t){var e=this;void 0===t&&(t={}),Object.keys(t).forEach((function(r){return e[r]=t[r]}))}return t.prototype.getRequestBody=function(){return this},Object.defineProperty(t,"formGroup",{get:function(){return new o.FormGroup({Email:new o.FormControl(null,[o.Validators.required]),Roles:new o.FormControl(null,[o.Validators.required]),Groups:new o.FormControl(null,[o.Validators.required])})},enumerable:!0,configurable:!0}),t}();t.Request=e;var r=function(){function t(t){var e=this;void 0===t&&(t={}),Object.keys(t).forEach((function(r){return e[r]=t[r]}))}return t.prototype.extractData=function(){return this.Result.User},t}();t.Response=r}(k||(k={}));var N=function(){function t(t,e,r){var n=this;this.http=t,this.store=e,this.configurationService=r,this.configurationService.config$.subscribe((function(t){return n.config=t})),setTimeout((function(){n.store.dispatch(new w)}),999)}return t.prototype.getAccountInfo=function(){var t=this;return this.configurationService.config$.pipe(l.filter((function(t){return""!=t.endpoints.profileInformation})),l.take(1),l.combineLatest(this.store.select(h.getUser)),l.filter((function(t){var e=b(t,2);e[0];return null!=e[1]})),l.switchMap((function(e){var r=b(e,2),n=r[0],o=r[1];return t.http.get(m.stringTemplate(n.env[n.server]+n.endpoints.profileInformation,{user:o||{}})).let(n.responseToUserInfo).pipe(l.map((function(t){var e=Object.assign({},t);return e.Role&&(e.Roles=[e.Role]),e})),l.catchError((function(t){return d.of(!1)})))})))},t.prototype.editProfile=function(t){var e=new k.Request(t);return this.http.put(m.stringTemplate(this.config.env[this.config.server]+this.config.endpoints.editProfile,e),e.getRequestBody()).pipe(l.map((function(t){return new k.Response(t).extractData()})))},t.prototype.getInfo=function(t){var e=new j.Request(t);return this.http.get(m.stringTemplate(this.config.env[this.config.server]+this.config.endpoints.getAccountInfo,e)).pipe(l.map((function(t){return t})))},t.prototype.is_role=function(t){return this.store.select($).pipe(l.filter((function(t){return t&&null!=t.Roles})),l.take(1),l.map((function(e){return e.Roles.indexOf(t)>-1})))},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:i.HttpClient},{type:c.Store},{type:P}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(i.HttpClient),e.ɵɵinject(c.Store),e.ɵɵinject(P))},token:t,providedIn:"root"}),t}();var q={EDIT_PROFILE:"[USER][PASSWORD] EDIT_PROFILE",EDIT_PROFILE_START:"[USER][PASSWORD] EDIT_PROFILE_START",EDIT_PROFILE_SUCCEED:"[USER][PASSWORD] EDIT_PROFILE_SUCCEED",EDIT_PROFILE_FAILED:"[USER][PASSWORD] EDIT_PROFILE_FAILED"},M=function(t){this.payload=t,this.type=q.EDIT_PROFILE};var H=function(t){this.payload=t,this.type=q.EDIT_PROFILE_START};var W=function(t){this.payload=t,this.type=q.EDIT_PROFILE_SUCCEED};var B=function(){this.type=q.EDIT_PROFILE_FAILED};var K=function(){function t(t,e,r){var n=this;this.actions$=t,this.router=e,this.service=r,this.EditProfileRequest$=this.actions$.pipe(p.ofType(q.EDIT_PROFILE),l.pluck("payload"),l.map((function(t){return new H(t)}))),this.RequestEditProfileLink$=this.actions$.pipe(p.ofType(q.EDIT_PROFILE_START),l.pluck("payload"),l.switchMap((function(t){return n.service.editProfile(t)})),l.map((function(t){return new W(t)})),l.catchError((function(){return d.of(new B)}))),this.goToView$=this.actions$.pipe(p.ofType(q.EDIT_PROFILE_SUCCEED),l.map((function(){return n.router.navigate(["/user/profile"]),new w})))}return t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p.Actions},{type:n.Router},{type:N}]},x([p.Effect(),v("design:type",Object)],t.prototype,"EditProfileRequest$",void 0),x([p.Effect(),v("design:type",Object)],t.prototype,"RequestEditProfileLink$",void 0),x([p.Effect(),v("design:type",Object)],t.prototype,"goToView$",void 0),t}();var V=function(){function t(t,e){var r=this;this.actions$=t,this.userService=e,this.ProfileRequest$=this.actions$.pipe(p.ofType(F.GET_PROFILE),l.pluck("payload"),l.map((function(t){return new D}))),this.getProfile$=this.actions$.pipe(p.ofType(F.GET_PROFILE_START),l.pluck("payload"),l.switchMap((function(t){return r.userService.getAccountInfo().pipe(l.map((function(t){return new O(t)})),l.catchError((function(){return d.of(new L)})))}))),this.refreshUserInfo$=this.actions$.pipe(p.ofType(F.GET_PROFILE_SUCCEED),l.pluck("payload"),l.map((function(t){return new C(t)})))}return t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p.Actions},{type:N}]},x([p.Effect(),v("design:type",Object)],t.prototype,"ProfileRequest$",void 0),x([p.Effect(),v("design:type",Object)],t.prototype,"getProfile$",void 0),x([p.Effect(),v("design:type",Object)],t.prototype,"refreshUserInfo$",void 0),t}();var Q=function(){function t(t,e,r){this.actions$=t,this.router=e,this.service=r,this.getAccountInfo$=this.actions$.pipe(p.ofType(h.SignInActionTypes.SIGNIN_SUCCEED),l.map((function(){return new w}))),this.signout$=this.actions$.pipe(p.ofType(h.SignInActionTypes.SIGNOUT),l.map((function(){return new C({})})))}return t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p.Actions},{type:n.Router},{type:N}]},x([p.Effect(),v("design:type",Object)],t.prototype,"getAccountInfo$",void 0),x([p.Effect(),v("design:type",Object)],t.prototype,"signout$",void 0),t}();var z={GET_RESET_PASSWORD_LINK:"[USER][PASSWORD] GET_RESET_PASSWORD_LINK",RESET_PASSWORD_LINK_REQUEST_START:"[USER][PASSWORD] RESET_PASSWORD_LINK_REQUEST_START",RESET_PASSWORD_LINK_REQUEST_SUCCEED:"[USER][PASSWORD] RESET_PASSWORD_LINK_REQUEST_SUCCEED",RESET_PASSWORD_LINK_REQUEST_FAILED:"[USER][PASSWORD] RESET_PASSWORD_LINK_REQUEST_FAILED",DISABLE_GET_LINK:"[USER][PASSWORD] DISABLE_GET_LINK",ENABLE_GET_LINK:"[USER][PASSWORD] ENABLE_GET_LINK",MAXIMUM_TRY_HAPPEND:"[USER][PASSWORD] MAXIMUM_TRY_HAPPEND",PASSWORD_CHANGED_SUCCEED:"[USER][PASSWORD] PASSWORD_CHANGED_SUCCEED",PASSWORD_CHANGED_FAILED:"[USER][PASSWORD] PASSWORD_CHANGED_FAILED"};var X={numberOfRequested:0,lastRequestedTime:null,disable:!1};function Y(t,e){switch(void 0===t&&(t=X),e.type){case z.GET_RESET_PASSWORD_LINK:return R({},t);case z.RESET_PASSWORD_LINK_REQUEST_START:return R({},t,{numberOfRequested:t.numberOfRequested+1,lastRequestedTime:Date.now().toString()});case z.RESET_PASSWORD_LINK_REQUEST_SUCCEED:return R({},t);case z.DISABLE_GET_LINK:return R({},t,{disable:!0});case z.ENABLE_GET_LINK:return R({},t,{disable:!1});default:return t}}var J={CHANGE_PASSWORD:"[USER][PASSWORD] CHANGE_PASSWORD",PASSWORD_CHANGED_START:"[USER][PASSWORD] PASSWORD_CHANGED_START",PASSWORD_CHANGED_SUCCEED:"[USER][PASSWORD] PASSWORD_CHANGED_SUCCEED",PASSWORD_CHANGED_FAILED:"[USER][PASSWORD] PASSWORD_CHANGED_FAILED"},Z=function(t){this.payload=t,this.type=J.CHANGE_PASSWORD};var tt={status:"pristine"};function et(t,e){switch(void 0===t&&(t=tt),e.type){case J.CHANGE_PASSWORD:return{status:"dirty"};case J.PASSWORD_CHANGED_START:return{status:"pending"};case J.PASSWORD_CHANGED_SUCCEED:return{status:"succeed"};case J.PASSWORD_CHANGED_FAILED:return{status:"failed"};default:return tt}}var rt={status:"pristine"};function nt(t,e){switch(void 0===t&&(t=rt),e.type){case q.EDIT_PROFILE:return{status:"dirty"};case q.EDIT_PROFILE_START:return{status:"pending"};case q.EDIT_PROFILE_SUCCEED:return{status:"succeed"};case q.EDIT_PROFILE_FAILED:return{status:"failed"};default:return t}}var ot={SEARCH:"[USER][SEARCH] SEARCH",SEARCH_START:"[USER][SEARCH] SEARCH_START",SEARCH_SUCCEED:"[USER][SEARCH] SEARCH_SUCCEED",SEARCH_FAILED:"[USER][SEARCH] SEARCH_FAILED",CLEAR_SEARCHED_USER:"[USER][SEARCH] CLEAR_SEARCHED_USER"},it=function(t){this.payload=t,this.type=ot.SEARCH};var at={status:"pristine",data:{}};function st(t,e){switch(void 0===t&&(t=at),e.type){case ot.SEARCH:return R({},t,{status:"dirty",data:new j.Response});case ot.SEARCH_START:return R({},t,{status:"pending"});case ot.SEARCH_SUCCEED:return R({},t,{status:"succeed",data:e.payload});case ot.SEARCH_FAILED:return R({},t,{status:"failed"});case ot.CLEAR_SEARCHED_USER:return at;default:return t}}var ut={user:G,resetPasswordRequest:Y,changePassword:et,searchView:st,editProfile:nt};var ct=c.createFeatureSelector("user"),pt=c.createSelector(ct,(function(t){return t.user.loaded})),ft=(c.createSelector(ct,(function(t){return t.user.loaded})),c.createSelector(ct,(function(t){return t.resetPasswordRequest}))),lt=(c.createSelector(ft,(function(t){return t.numberOfRequested})),c.createSelector(ft,(function(t){return t.disable})),c.createSelector(ct,(function(t){return t.user}))),dt=c.createSelector(lt,$),mt=c.createSelector(ct,(function(t){return t.searchView})),ht=c.createSelector(mt,(function(t){return t.status})),Et=function(){function t(t){this.store=t,this.formGroup=j.Request.formGroup,this.userDataLoaded$=new d.BehaviorSubject(!1),this.userNotFound$=new d.BehaviorSubject(!1),this.user=this.store.select(dt),this.userStatus$=this.store.select(ht)}return t.prototype.ngOnInit=function(){var t=this;this.userStatus$.subscribe((function(e){return t.userDataLoaded$.next(!"pristine|dirty|pending".includes(e))}))},t.prototype.search=function(){this.formGroup.valid&&this.store.dispatch(new it(this.formGroup.value))},t.decorators=[{type:e.Component,args:[{selector:"search",template:"<mat-card fxFlex=\"450px\" *ngIf=\"(userStatus$ | async) == 'succeed'\">\r\n  <mat-card-header>\r\n    <mat-card-title>\r\n      <div fxLayout=\"row\" fxLayoutAlign=\"space-between\">\r\n        <div fxFlex=\"nogrow\">\r\n          \x3c!-- {{(user | async).LastName }}، {{(user | async).FirstName }} --\x3e\r\n        </div>\r\n        <div fxFlex=\"nogrow\">\r\n          \x3c!-- {{(user | async).Email}} --\x3e\r\n        </div>\r\n      </div>\r\n    </mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <div>\r\n      <div class='list-item' fxFlexLayout='row' fxLayoutAlign='center center'>\r\n        <mat-icon fxFlex='nogrow'>local_grocery_store</mat-icon>\r\n        <div fxFlex='15px'></div>\r\n        <p fxFlex='40'>شناسه</p>\r\n        \x3c!-- <p fxFlex='60' fxLayoutAlign=\"end\">{{(user | async)._id }}</p> --\x3e\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row' fxLayoutAlign='center center'>\r\n        <mat-icon fxFlex='nogrow'>email</mat-icon>\r\n        <div fxFlex='15px'></div>\r\n        <p fxFlex='40'>پست الکترونیکی</p>\r\n        \x3c!-- <p fxFlex='60' fxLayoutAlign=\"end\">{{(user | async).Email }}</p> --\x3e\r\n      </div>\r\n    </div>\r\n\r\n  </mat-card-content>\r\n</mat-card>",styles:[""]}]}],t.ctorParameters=function(){return[{type:c.Store}]},t}();var yt=function(){function t(){this.submited=new e.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.submit=function(){},t.prototype.changePassword=function(){this.formGroup.valid&&this.submited.emit(this.formGroup.value)},t.decorators=[{type:e.Component,args:[{selector:"user-change-password",template:'<div fxFlex="450px">\r\n  <form [formGroup]="formGroup" (ngSubmit)="changePassword()" fxLayout="column">\r\n    <mat-card>\r\n      <mat-card-content>\r\n        <mat-form-field fxFlexFill>\r\n          <input type="password" matInput placeholder="کلمه عبور" formControlName="Password">\r\n        </mat-form-field>\r\n        <mat-form-field fxFlexFill>\r\n          <input type="password" matInput placeholder="تکرار کلمه عبور" formControlName="Confirm">\r\n        </mat-form-field>\r\n      </mat-card-content>\r\n      <mat-card-actions fxLayoutAlign="center center">\r\n        <button fxFlex="nogrow" type="submit" mat-raised-button color="primary">تغییر رمز عبور</button>\r\n        <button fxFlex="nogrow" type="button" routerLink="/user/panel" mat-raised-button>بازگشت</button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </form>\r\n</div>',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={formGroup:[{type:e.Input}],submited:[{type:e.Output}]},t}();var gt=function(){function t(t){this.router=t,this.submited=new e.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.editProfile=function(t){t.valid&&this.submited.emit(t.value)},t.prototype.goback=function(){this.router.navigate([".."])},t.decorators=[{type:e.Component,args:[{selector:"profile-edit",template:'<div fxFlex="450px">\r\n\r\n  \r\n  <ngs-form-view #form [id]="formId" [card]="true" (accept)="editProfile(form.formGroup)" (cancel)="goback()" ></ngs-form-view>\r\n  \x3c!-- <form [formGroup]="formGroup" (ngSubmit)="editProfile()" fxLayout="column">\r\n    <mat-card>\r\n      <mat-card-content>\r\n      </mat-card-content>\r\n      <mat-card-actions align="end">\r\n        <button type="button" routerLink=".." mat-button color="primary">بازگشت</button>\r\n        <button type="submit" mat-raised-button color="primary">ویرایش</button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </form> --\x3e\r\n</div>'}]}],t.ctorParameters=function(){return[{type:n.Router}]},t.propDecorators={submited:[{type:e.Output}],userInfo:[{type:e.Input}],formId:[{type:e.Input}],roles$:[{type:e.Input,args:["roles"]}],groups:[{type:e.Input}]},t}();var St=function(){function t(t,e){this.userConfigurationService=t,this.store=e,this.links$=this.userConfigurationService.config$.pipe(l.map((function(t){return t.dashboardLinks}))),this.links=[{title:"مشاهده حساب کاربری",route:"/user/panel/profile",icon:"person"}]}return t.prototype.ngAfterViewInit=function(){},t.decorators=[{type:e.Component,args:[{selector:"user-dashboard-links",template:"<div fxLayout=\"row\" fxLayoutAlign=\"center\" fxLayoutGap=\"25px\" class=\"main-container\">\r\n\r\n    <div class=\"content-action\">\r\n      <mat-card class=\"with-sticky-action\">\r\n            <mat-card-header>\r\n                    <mat-card-title fxLayout=\"row\" fxLayoutGap=\"5px\">\r\n                      <mat-icon>person</mat-icon>\r\n                      <span>تنظیمات پروفایل</span>\r\n                    </mat-card-title>\r\n                 \r\n                  </mat-card-header>\r\n          <div fxLayout='row' fxLayoutWrap id=\"con\">\r\n    <button fxFlex=\"31\" class='link' mat-raised-button [routerLink]='link.route' *ngFor='let link of links'>\r\n        <div fxLayout='column' fxLayoutAlign='center center'>\r\n            <mat-icon color='primary'>{{link.icon}}</mat-icon>\r\n            <h3 class='title'>{{link.title}}</h3>\r\n            <div class='description'>{{link.description}}</div>\r\n        </div>\r\n    </button>\r\n    <button fxFlex=\"31\" class='link' mat-raised-button [routerLink]='link.route' *ngFor='let link of links$ | async'>\r\n        <div fxLayout='column' fxLayoutAlign='center center'>\r\n            <mat-icon color='primary'>{{link.icon}}</mat-icon>\r\n            <h3 class='title'>{{link.title}}</h3>\r\n            <div class='description'>{{link.description}}</div>\r\n        </div>\r\n    </button>\r\n</div>\r\n</mat-card>\r\n</div>\r\n</div>",styles:["#con [fxflex]{margin-right:25px}:host{width:100%}button mat-icon{font-size:48px;width:48px;height:48px}button.link{padding:25px 15px;margin-bottom:25px}.title{margin-top:0;margin-bottom:5px}.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:90%}"]}]}],t.ctorParameters=function(){return[{type:P},{type:c.Store}]},t}();var Rt=function(){function t(t){this.snackBar=t,this.submitted=new e.EventEmitter,this.maximumResendingHappend$=new E.BehaviorSubject(!1),this.timer$=g.Observable.timer(0,100).pipe(l.map((function(t){return t+1})),l.takeWhile((function(t){return 100*t<=3e3})),l.map((function(t){return 3e3-100*t})))}return Object.defineProperty(t.prototype,"pending",{set:function(t){t&&this.formGroup.disable(),this.formGroup.enable()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.numberOfRequested.subscribe((function(e){e>2&&t.maximumResendingHappend$.next(!0)}))},t.prototype.submit=function(){if(this.formGroup.valid){this.submitted.emit(this.formGroup.value);var t=this.maximumResendingHappend$.getValue()?"عدم امکان ...":"پیامک جدید برای شما ارسال گردید.";this.snackBar.open(t,"",{duration:3e3})}},t.decorators=[{type:e.Component,args:[{selector:"user-reset-password-request",template:'<form [formGroup]="formGroup" (ngSubmit)="submit()" fxLayout="column">\r\n  <mat-card>\r\n    <mat-card-header>\r\n      <mat-card-title>\r\n        <h3>درخواست بازیابی رمز عبور</h3>\r\n      </mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <p>برای بازیابی رمز عبور شماره تلفن خود را وارد نمایید</p>\r\n      <mat-radio-group fxFlexFill formControlName="Type">\r\n        <mat-radio-button value="sms">پیامک</mat-radio-button>\r\n        <mat-radio-button value="email">پست الکترونیکی</mat-radio-button>\r\n      </mat-radio-group>\r\n      <mat-form-field fxFlexFill>\r\n        <input matInput placeholder="شماره تلفن همراه" formControlName="Username">\r\n      </mat-form-field>\r\n    </mat-card-content>\r\n    <mat-card-actions>\r\n      \x3c!--<button type="submit" [disabled]=\'(canRequestPin | async) || (maximumResendingHappend$ | async)\' (click)="submit()" mat-raised-button color="primary">--\x3e\r\n      <button type="submit" [disabled]=\'(canRequestPin | async)\' (click)="submit()" mat-raised-button color="primary">\r\n        <span *ngIf=\'!(canRequestPin | async)\'>\r\n          بازیابی رمز عبور\r\n        </span>\r\n        \x3c!--<div *ngIf=\'(canRequestPin | async) && !(maximumResendingHappend$ | async)\'>\r\n          {{timer$ | async}} ثانیه تا امکان در خواست دوباره دریافت پیامک.\r\n        </div>\r\n        <div *ngIf=\'(maximumResendingHappend$ | async)\'>\r\n          عدم امکان درخواست\r\n        </div>--\x3e\r\n      </button>\r\n      <a mat-button routerLink=\'/auth/signin\'>انصراف</a>\r\n    </mat-card-actions>\r\n  </mat-card>\r\n</form>\r\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:u.MatSnackBar}]},t.propDecorators={submitted:[{type:e.Output}],formGroup:[{type:e.Input}],numberOfRequested:[{type:e.Input}],canRequestPin:[{type:e.Input}],pending:[{type:e.Input}]},t}();var xt,vt=function(){function t(t,e){var r=this;this.route=t,this.store=e,this.route.params.subscribe((function(t){var e=new j.Request({Email:t.Email});r.store.dispatch(new it(e))}))}return t.decorators=[{type:e.Component,args:[{template:"<router-outlet></router-outlet>"}]}],t.ctorParameters=function(){return[{type:n.ActivatedRoute},{type:c.Store}]},t}();(function(t){var e=function(){function t(t){var e=this;void 0===t&&(t={}),Object.keys(t).forEach((function(r){return e[r]=t[r]}))}return t.prototype.getRequestBody=function(){return{Password:this.Password}},Object.defineProperty(t,"formGroup",{get:function(){return new o.FormGroup({Password:new o.FormControl(null,[o.Validators.required,o.Validators.minLength(7)]),Confirm:new o.FormControl(null,[o.Validators.required,m.MatchValidator("Password")])})},enumerable:!0,configurable:!0}),t}();t.Request=e;var r=function(){};t.Response=r})(xt||(xt={}));var bt=function(){function t(t,e){this.route=t,this.store=e,this.formGroup=xt.Request.formGroup,this.ChangePasswordModel=new xt.Request}return t.prototype.ngOnInit=function(){this.store.select(dt).subscribe((function(t){}))},t.prototype.changePassword=function(t){this.ChangePasswordModel.Password=this.formGroup.get("Password").value,this.store.dispatch(new Z(this.ChangePasswordModel))},t.decorators=[{type:e.Component,args:[{template:"<user-change-password\n                (submited)='changePassword($event)'\n                [formGroup]=\"formGroup\"\n              ></user-change-password>"}]}],t.ctorParameters=function(){return[{type:n.ActivatedRoute},{type:c.Store}]},t}();var _t=function(){function t(t,e){this.store=t,this.configService=e,this.userInforamation$=this.store.select(dt),this.roles$=this.store.select(y.getAppConfig).pipe(l.filter((function(t){return null!=t})),l.map((function(t){return t.Config.Roles}))),this.groups=d.of(["test1","test2"]),this.config$=this.configService.config$}return t.prototype.ngOnInit=function(){},t.prototype.updateProfile=function(t){this.store.dispatch(new M(t))},t.decorators=[{type:e.Component,args:[{selector:"profile-edit-contianer",template:'<profile-edit\n                (submited)=\'updateProfile($event)\'\n                [userInfo]="userInforamation$ | async"\n                [roles]="roles$"\n\t\t\t\t[groups]="groups | async"\n\t\t\t\t[formId]="(config$|async)?.forms.profile_edit"\n              ></profile-edit>'}]}],t.ctorParameters=function(){return[{type:c.Store},{type:P}]},t}();var It=function(){function t(t){this.store=t,this.user$=this.store.select($)}return t.prototype.ngOnInit=function(){},t.decorators=[{type:e.Component,args:[{selector:"user-dashboard-container",template:'\x3c!-- <router-outlet name="links"></router-outlet> --\x3e\r\n<div fxLayoutAlign="center">\r\n    <router-outlet></router-outlet>\r\n</div>',styles:["#box-left{background:#fff}#box-bottom{background:#2b0033}#box-right{background:#000833;padding-top:10px!important;padding-bottom:10px!important}#box-right div{background:#fff;opacity:.5}#banner:not(.active){height:100%;-webkit-filter:grayscale(100%) brightness(1.5) opacity(.2) blur(2px);filter:grayscale(100%) brightness(1.5) opacity(.2) blur(2px)}#s1{background:#aaa}#s2{background:#bbb}#s3{background:#ccc}.personal-info{background-color:rgba(255,255,255,.5);position:relative;right:10%;width:90%;height:469px}.personal-info h2{color:#00bcd4;font-weight:400;font-size:24px;font-family:iran-sans-light!important}.personal-info h6{font-weight:400;font-size:12px;float:right;width:50%;margin:0;color:#555;border-bottom:2px solid #ececec}.personal-info p{float:right;width:30%;margin:0;font-size:13px;padding-right:30px;border-bottom:2px solid #ececec}.personal-info div{width:100%;height:50px;position:relative;line-height:52px;right:17px}.quick-box{width:100%;height:50px;position:relative;line-height:52px;padding-top:79px}.quick-btn{background-color:#00bcd4;margin:12px 10px;height:100px;text-align:center;line-height:100px;font-size:17px;color:#fff}.banner-section{text-align:center}.info-section{padding:60px 25px 10px;background-color:#f7f7f7;background-image:url(https://www.toptal.com/designers/subtlepatterns/patterns/grey.png)!important;height:1040px;padding-bottom:120px!important}"]}]}],t.ctorParameters=function(){return[{type:c.Store}]},t}();var At=function(){function t(){this.info=[]}return Object.defineProperty(t.prototype,"information",{set:function(t){var e=this;t&&Object.keys(t).forEach((function(r){return e.info.push([r,t[r]])}))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.decorators=[{type:e.Component,args:[{selector:"user-profile",template:"<div fxFlex=\"450px\">\r\n  <router-outlet name=\"ngs-user-profile-view\"></router-outlet>\r\n  <router-outlet></router-outlet>\r\n  \x3c!-- <mat-card>\r\n    <mat-card-header>\r\n      <mat-card-title>اطلاعات پروفایل</mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content *ngIf='dataStatus$ | async'>\r\n        <div class='list-item' fxFlexLayout='row' *ngFor=\"let item of info\">\r\n            <p fxFlex='40'>{{item[0]}}</p>\r\n            <p fxFlex='60'>{{item[1]}}</p>\r\n        </div>\r\n     \r\n    </mat-card-content>\r\n\r\n    <mat-card-actions align=\"end\">\r\n      <button mat-button color=\"primary\" routerLink='..'>بازگشت</button>\r\n      <button mat-raised-button color=\"primary\" routerLink='edit'>ویرایش</button>\r\n    </mat-card-actions>\r\n  </mat-card> --\x3e\r\n</div>\r\n\r\n\r\n\r\n\x3c!-- <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>ایمیل</p>\r\n        <p fxFlex='60'>{{(information | async).Email}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>roles</p>\r\n        <p fxFlex='60'>{{(information | async).Roles | json}}</p>\r\n      </div> --\x3e\r\n\x3c!-- <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>نام</p>\r\n        <p fxFlex='60'>{{(userInformation | async).FirstName}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>نام خانوادگی</p>\r\n        <p fxFlex='60'>{{(userInformation | async).LastName}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>نام کاربری</p>\r\n        <p fxFlex='60'>{{(userInformation | async).Username}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>تلفن همراه</p>\r\n        <p fxFlex='60'>{{(userInformation | async).MobileNumber | persianNumber}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>جنسیت</p>\r\n        <p fxFlex='60'>{{sex$ | async}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>تاریخ تولد</p>\r\n        <p fxFlex='60'>{{(userInformation | async).Birthdate | persianDate : false}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>ایمیل</p>\r\n        <p fxFlex='60'>{{(userInformation | async).Email}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>{{(identifierType$ | async)}}</p>\r\n        <p fxFlex='60'>{{(userInformation | async).IdentificationNo | persianNumber}}</p>\r\n      </div>\r\n      <div class='list-item' fxFlexLayout='row'>\r\n        <p fxFlex='40'>تاریخ عضویت</p>\r\n        <p fxFlex='60'>{{(userInformation | async).RegisterDate | persianDate}}</p>\r\n      </div> --\x3e",styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={information:[{type:e.Input}],dataStatus$:[{type:e.Input}]},t}();var Pt=function(){function t(t){this.store=t,this.data$=this.store.select(dt),this.dataStatus$=this.store.select(pt)}return t.prototype.ngOnInit=function(){},t.decorators=[{type:e.Component,args:[{template:"<user-profile\n                [information]=\"data$ | async\"\n                [dataStatus$]='dataStatus$'\n            ></user-profile>"}]}],t.ctorParameters=function(){return[{type:c.Store}]},t}();var Ft=function(){function t(){}return t.forRoot=function(t){return{ngModule:wt,providers:[{provide:A,useValue:t}]}},t.decorators=[{type:e.NgModule,args:[{imports:[i.HttpClientModule,o.FormsModule,n.RouterModule,r.CommonModule,u.MatExpansionModule,u.MatSnackBarModule,u.MatIconModule,u.MatButtonModule,u.MatCardModule,u.MatSelectModule,u.MatInputModule,u.MatFormFieldModule,u.MatTabsModule,a.FlexLayoutModule,u.MatRadioModule,o.ReactiveFormsModule,s.BrowserAnimationsModule,f.NgsFormModule],declarations:[Et,At,yt,gt,Pt,St,Rt,vt,It,bt,_t],exports:[]}]}],t}(),wt=function(){function t(){window.___starter=window.___starter||{},window.___starter.user="8.0.10"}return t.decorators=[{type:e.NgModule,args:[{imports:[Ft,c.StoreModule.forFeature("user",ut),p.EffectsModule.forFeature([K,V,Q])]}]}],t.ctorParameters=function(){return[]},t}(),Dt=[{path:"user/panel",component:It,children:[{path:"",component:St},{path:"profile",component:Pt},{path:"profile/edit",component:_t}]},{path:"admin/user",children:[{path:":Email",component:vt,children:[{path:"profile-edit",component:_t}]}]}],Ot=n.RouterModule.forChild(Dt),Lt=function(){function t(t,e){this.store=t,this.configService=e}return t.prototype.getDisplayName=function(){return this.store.select(dt).let(this.configService.config$.getValue().mapUserDisplayName)},t.prototype.getInfo=function(){return this.store.select(dt)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:c.Store},{type:P}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(c.Store),e.ɵɵinject(P))},token:t,providedIn:"root"}),t}();t.NgsUserModule=Ft,t.NgsUserModuleOutlets={ngs_user_profile_view:"ngs-user-profile-view"},t.NgsUserRoutingModule=Ot,t.UserActionTypes=T,t.UserFacadeService=Lt,t.UserModel=_,t.UserService=N,t.getAccountInfo=dt,t.ɵa=A,t.ɵb=wt,t.ɵba=V,t.ɵbb=Q,t.ɵc=Dt,t.ɵd=ut,t.ɵf=ct,t.ɵg=lt,t.ɵh=Et,t.ɵi=At,t.ɵj=yt,t.ɵk=gt,t.ɵl=Pt,t.ɵm=St,t.ɵn=P,t.ɵo=Rt,t.ɵp=vt,t.ɵq=It,t.ɵr=bt,t.ɵs=_t,t.ɵt=G,t.ɵu=$,t.ɵv=Y,t.ɵw=et,t.ɵx=st,t.ɵy=nt,t.ɵz=K,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=soushians-user.umd.min.js.map