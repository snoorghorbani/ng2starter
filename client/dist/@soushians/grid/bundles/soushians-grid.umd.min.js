!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/flex-layout"),require("angular-gridster2"),require("@angular/router"),require("@angular/common/http"),require("@soushians/frontend-authentication"),require("@soushians/shared"),require("rxjs"),require("@ngrx/effects"),require("rxjs/operators"),require("@soushians/user"),require("@ngrx/store"),require("@angular/material"),require("@angular/forms"),require("@angular/core")):"function"==typeof define&&define.amd?define("@soushians/grid",["exports","@angular/common","@angular/flex-layout","angular-gridster2","@angular/router","@angular/common/http","@soushians/frontend-authentication","@soushians/shared","rxjs","@ngrx/effects","rxjs/operators","@soushians/user","@ngrx/store","@angular/material","@angular/forms","@angular/core"],e):e((t.soushians=t.soushians||{},t.soushians.grid={}),t.ng.common,t.ng["flex-layout"],t.angularGridster2,t.ng.router,t.ng.common.http,t.frontendAuthentication,t.shared,t.rxjs,t.effects,t.rxjs.operators,t.i3,t.i2,t.ng.material,t.ng.forms,t.ng.core)}(this,function(t,e,n,r,o,i,a,c,s,p,u,l,d,f,m,g){"use strict";var h={env:{production:!1,frontend_server:""},endpoints:{upsert:"/api/grid",find:"/api/grid",get:"/api/grid/${model._id}",update_item:"/api/grid/item",update_item_access:"/api/grid/item/access"},types:{}},y=new g.InjectionToken("GridModuleConfig"),v=function(){function t(){}return t.decorators=[{type:g.Component,args:[{selector:"ngs-grid-root",template:"<router-outlet></router-outlet>"}]}],t}(),b=[{path:"grid",component:v,children:[]}],x=o.RouterModule.forChild(b),C=function(){return(C=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function _(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}function w(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var F,G=function Z(t){var e=void 0===t?{config:{},items:[]}:t,n=e._id,r=e.oid,o=e.name,i=e.type,a=e.config,c=e.items;this._id=n,this.oid=r,this.name=o,this.type=i,this.config=a,this.items=c};!function(t){var e=function(){function t(t){void 0===t&&(t={}),this.grid=new G(t)}return t.prototype.getRequestBody=function(){return this.grid},t}();t.Request=e;var n=function r(){};t.Response=n}(F||(F={}));var I=function(){function t(t,e){this.store=e,this.config$=new s.BehaviorSubject(h),this._config=Object.assign({},h,t),this.config$.next(this._config)}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.decorators=[{type:g.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:g.Inject,args:[y]}]},{type:d.Store}]},t}(),M=function tt(t){this.payload=t,this.type="[GRID][API][GetGrid] start"},T=function et(t){this.payload=t,this.type="[GRID][API][GetGrid] succeed"},k=function nt(t){this.payload=t,this.type="[GRID][API][GetGrid] failed"},R=function(){function t(t,e,n,r){this.http=t,this.store=e,this.userFacadeService=n,this.configurationService=r}return t.prototype.get=function(e){var n=this;return this.configurationService.config$.pipe(u.filter(function(t){return""!==t.endpoints.get}),u.take(1),u.skipUntil(this.store.select(a.getFrontendUser)),u.switchMap(function(t){return n.http.get(c.stringTemplate(t.env.frontend_server+t.endpoints.get,{_id:e}),{}).pipe(u.map(function(t){return t.Result}))}))},t.prototype.getGrids=function(){var e=this;return this.configurationService.config$.pipe(u.filter(function(t){return""!=t.endpoints.find}),u.switchMap(function(t){return e.http.get(t.env.frontend_server+t.endpoints.find)}),u.map(function(t){return t.Result}))},t.prototype.update_item=function(e){var n=this;return this.configurationService.config$.pipe(u.filter(function(t){return""!=t.endpoints.update_item}),u.switchMap(function(t){return n.http.patch(t.env.frontend_server+t.endpoints.update_item,e)}),u.map(function(t){return t.Result}))},t.prototype.update_item_access=function(e){var n=this;return this.configurationService.config$.pipe(u.filter(function(t){return""!=t.endpoints.update_item_access}),u.switchMap(function(t){return n.http.patch(t.env.frontend_server+t.endpoints.update_item_access,e)}),u.map(function(t){return t.Result}))},t.prototype.upsert=function(t){var e=this,n=new F.Request(t);return this.configurationService.config$.pipe(u.filter(function(t){return""!=t.endpoints.upsert}),u.take(1),u.switchMap(function(t){return e.http.post(t.env.frontend_server+t.endpoints.upsert,n.getRequestBody(),{})}),u.map(function(t){return t.Result}))},t.prototype.selectById=function(e){var n=this,r=new s.BehaviorSubject(undefined);return this.store.select(function(t){return t.grids.db.data}).pipe(u.filter(function(t){return null!=t}),u.map(function(t){return t.find(function(t){return t._id==e})}),u.tap(function(t){null==t&&n.store.dispatch(new M(e))})).subscribe(function(t){return r.next(t)}),r.asObservable()},t.prototype.selectByOid=function(e){var n=this,r=new s.BehaviorSubject(undefined);return this.store.select(function(t){return t.grids.db.data}).pipe(u.filter(function(t){return null!=t}),u.map(function(t){return t.find(function(t){return t._id==e})}),u.tap(function(t){null==t&&n.store.dispatch(new M(e))})).subscribe(function(t){return r.next(t)}),r.asObservable()},t.decorators=[{type:g.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:i.HttpClient},{type:d.Store},{type:l.UserFacadeService},{type:I}]},t.ngInjectableDef=g.defineInjectable({factory:function(){return new t(g.inject(i.HttpClient),g.inject(d.Store),g.inject(l.UserFacadeService),g.inject(I))},token:t,providedIn:"root"}),t}(),E=function(){function t(t,e){var n=this;this.actions$=t,this.service=e,this.start$=this.actions$.pipe(p.ofType("[GRID][API][GetGrid] start"),u.map(function(t){return t.payload}),u.switchMap(function(t){return n.service.get(t)}),u.map(function(t){return new T(t)}),u.catchError(function(t){return s.of(new k(t))}))}return t.decorators=[{type:g.Injectable}],t.ctorParameters=function(){return[{type:p.Actions},{type:R}]},_([p.Effect(),w("design:type",Object)],t.prototype,"start$",void 0),t}(),S=function rt(t){this.payload=t,this.type="[UPSERT_GRID][API][UpsertGrid] start"},j=function ot(t){this.payload=t,this.type="[UPSERT_GRID][API][UpsertGrid] succeed"},D=function it(t){this.payload=t,this.type="[UPSERT_GRID][API][UpsertGrid] failed"},O=function(){function t(t,e){var n=this;this.actions$=t,this.service=e,this.start$=this.actions$.pipe(p.ofType("[UPSERT_GRID][API][UpsertGrid] start"),u.pluck("payload"),u.switchMap(function(t){return n.service.upsert(t)}),u.map(function(t){return new j(t)}),u.catchError(function(t){return s.of(new D(t))}))}return t.decorators=[{type:g.Injectable}],t.ctorParameters=function(){return[{type:p.Actions},{type:R}]},_([p.Effect(),w("design:type",Object)],t.prototype,"start$",void 0),t}(),P=function at(t){this.payload=t,this.type="[GET_GRIDS][API][GetGrids] succeed"},$=function ct(t){this.payload=t,this.type="[GET_GRIDS][API][GetGrids] failed"},L=function(){function t(t,e){var n=this;this.actions$=t,this.service=e,this.start$=this.actions$.pipe(p.ofType("[GET_GRIDS][API][GetGrids] start"),u.switchMap(function(){return n.service.getGrids().pipe(u.map(function(t){return new P(t)}),u.catchError(function(t){return s.of(new $(t))}))}))}return t.decorators=[{type:g.Injectable}],t.ctorParameters=function(){return[{type:p.Actions},{type:R}]},_([p.Effect(),w("design:type",Object)],t.prototype,"start$",void 0),t}(),A="[GRID][DB] UPSERT",U="[GRID][DB] DELETE",N=function st(t){this.payload=t,this.type=A},B={data:[]};function q(t,e){var n;switch(void 0===t&&(t=B),e.type){case A:return n=t.data.concat(),e.payload.forEach(function(e){var t=n.findIndex(function(t){return t._id==e._id});-1<t?n.splice(t,1,e):n.push(e)}),C({},t,{data:n});case U:n=Object.assign({},t.data);var r=t.data.findIndex(function(t){return t._id==e.payload._id});return n.splice(r,1),C({},t,{data:n});default:return t}}var z={db:q},V=function(){function t(t){this.actions$=t,this.Upsert$=this.actions$.pipe(p.ofType("[GRID][API][GetGrid] succeed","[UPSERT_GRID][API][UpsertGrid] succeed"),u.pluck("payload"),u.map(function(t){return new N([t])})),this.UpsertMany$=this.actions$.pipe(p.ofType("[GET_GRIDS][API][GetGrids] succeed"),u.pluck("payload"),u.map(function(t){return new N(t)}))}return t.decorators=[{type:g.Injectable}],t.ctorParameters=function(){return[{type:p.Actions}]},_([p.Effect(),w("design:type",Object)],t.prototype,"Upsert$",void 0),_([p.Effect(),w("design:type",Object)],t.prototype,"UpsertMany$",void 0),t}(),H=function(){function t(t,e,n){this.configurationService=t,this.resolver=e,this.container=n,this.mapTypeToComponent=this.configurationService.config$.getValue().types}return Object.defineProperty(t.prototype,"type",{set:function(t){t&&this._resolve_correct_component_base_on_widget_type(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.component.instance.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.component.instance.config},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype._resolve_correct_component_base_on_widget_type=function(t){if(!this.mapTypeToComponent[t]){var e=Object.keys(this.mapTypeToComponent).join(", ");throw new Error("Trying to use an unsupported type ("+t+").\n\t\t  \t\t Supported types: "+e)}var n=this.resolver.resolveComponentFactory(this.mapTypeToComponent[t].configComponent);this.component=this.container.createComponent(n)},t.decorators=[{type:g.Directive,args:[{selector:"[ngsDynamicGridItemConfig]"}]}],t.ctorParameters=function(){return[{type:I},{type:g.ComponentFactoryResolver},{type:g.ViewContainerRef}]},t.propDecorators={type:[{type:g.Input}]},t}(),W=function(){function t(t){this.data=t}return Object.defineProperty(t.prototype,"config",{get:function(){return this.DynamicWidgetRef.config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.DynamicWidgetRef.valid},enumerable:!0,configurable:!0}),t.decorators=[{type:g.Component,args:[{template:'\n\t<div ngsDynamicGridItemConfig [type]="data.type"></div>\n\t'}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:g.Inject,args:[f.MAT_BOTTOM_SHEET_DATA]}]}]},t.propDecorators={DynamicWidgetRef:[{type:g.ViewChild,args:[H]}]},t}(),K=function(){function t(t,e){this.store=t,this.data=e,this.grid=this.data.grid,this.oid=this.data.oid,this._init_properties(),this._init_form_group()}return t.prototype.save=function(){var t=C({},this.grid,this.gridFormGroup.value,{config:C({},this.configFormGroup.value)});this.store.dispatch(new S(t))},t.prototype._init_form_group=function(){this.configFormGroup=new m.FormGroup({gridType:new m.FormControl("fit"),compactType:new m.FormControl("none"),displayGrid:new m.FormControl("onDrag&Resize"),enableEmptyCellDrag:new m.FormControl(!0),enableEmptyCellClick:new m.FormControl(!1),enableEmptyCellContextMenu:new m.FormControl(!1),scrollToNewItems:new m.FormControl(!0),margin:new m.FormControl(10),outerMargin:new m.FormControl(!0),outerMarginTop:new m.FormControl(10),outerMarginRight:new m.FormControl(10),outerMarginBottom:new m.FormControl(10),outerMarginLeft:new m.FormControl(10),minCols:new m.FormControl(3),maxCols:new m.FormControl(3),draggable:new m.FormGroup({enabled:new m.FormControl,delayStart:new m.FormControl(333)}),resizable:new m.FormGroup({enabled:new m.FormControl})}),this.gridFormGroup=new m.FormGroup({oid:new m.FormControl(this.oid),name:new m.FormControl("")}),this.gridFormGroup.patchValue(this.grid),this.configFormGroup.patchValue(this.grid.config)},t.prototype._init_properties=function(){this.gridTypes=["fit","scrollVertical","scrollHorizontal","fixed","verticalFixed","horizontalFixed"],this.compactType=["none","compactUp","compactLeft","compactUp&Left","compactLeft&Up"],this.displayGridTypes=["always","onDrag&Resize","none"]},t.decorators=[{type:g.Component,args:[{template:'<h4> تنظیمات داشبورد</h4>\r\n<div fxLayout="column wrap" fxLayoutGap="15px">\r\n    <div fxFlex="100" fxLayout="row wrap" [formGroup]="gridFormGroup">\r\n        <mat-form-field fxFlex="20">\r\n            <input matInput placeholder="نام" formControlName="name">\r\n        </mat-form-field>\r\n    </div>\r\n    <div fxLayout="column wrap" fxLayoutGap="15px"  fxFlex="100" [formGroup]="configFormGroup">\r\n        <div fxLayout="row wrap" fxLayoutGap="25px">\r\n            <mat-form-field fxFlex="20">\r\n                <mat-select placeholder="نوع قرارگیری گریدها در صفحه" formControlName="gridType">\r\n                    <mat-option *ngFor="let item of gridTypes" [value]="item">\r\n                        {{item}}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex="20">\r\n                <mat-select placeholder="نوع فشرده شدن گریدها در صفحه" formControlName="compactType">\r\n                    <mat-option *ngFor="let item of compactType" [value]="item">\r\n                        {{item}}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex="20">\r\n                <mat-select placeholder="نشان دادن سلول‌های گرید" formControlName="displayGrid">\r\n                    <mat-option *ngFor="let item of displayGridTypes" [value]="item">\r\n                        {{item}}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>\r\n        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="25px">\r\n            <div fxFlex="20">\r\n                <mat-checkbox formControlName="enableEmptyCellDrag">ایجاد گرید با درگ کردن</mat-checkbox>\r\n                \x3c!-- <mat-checkbox formControlName="enableEmptyCellClick">enableEmptyCellClick</mat-checkbox> --\x3e\r\n            </div>\r\n            <div fxFlex="20" [formGroup]="configFormGroup.get(\'draggable\')">\r\n                <mat-checkbox formControlName="enabled">قابلیت جابجایی گریدها</mat-checkbox>\r\n            </div>\r\n            <div fxFlex="20" [formGroup]="configFormGroup.get(\'resizable\')">\r\n                <mat-checkbox formControlName="enabled">قابلیت تغییر سایز گریدها</mat-checkbox>\r\n            </div>\r\n        </div>\r\n        \x3c!-- Margins --\x3e\r\n        <div fxFlex="100" fxLayout="column wrap" fxLayoutGap="25px">\r\n            <h4 fxFlex="100">حاشیه:</h4>\r\n            <div fxFlex fxLayout="column" fxLayoutGap="25px">\r\n                <mat-checkbox fxFlex formControlName="outerMargin">امکان تنظیم فاصله گریدها</mat-checkbox>\r\n            </div>\r\n            <div fxFlex="100"  fxLayout="row wrap" fxLayoutGap="25px">\r\n                <mat-form-field fxFlex>\r\n                    <input matInput type="number" placeholder="فاصله گریدها از هم" formControlName="margin" />\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex>\r\n                    <input matInput type="number" placeholder="فاصله گریدها ار بالا داشبورد" formControlName="outerMarginTop" />\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex>\r\n                    <input matInput type="number" placeholder="فاصله گریدها از راست داشبورد" formControlName="outerMarginRight" />\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex>\r\n                    <input matInput type="number" placeholder="فاصله گریدها از پایین داشبورد" formControlName="outerMarginBottom" />\r\n                </mat-form-field>\r\n                <mat-form-field fxFlex>\r\n                    <input matInput type="number" placeholder="فاصله گریدها از چپ داشبورد" formControlName="outerMarginLeft" />\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n        \x3c!-- Grid Size --\x3e\r\n        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="25px">\r\n            <h4 fxFlex="100">تعداد ستون‌ها:</h4>\r\n            <mat-form-field fxFlex="18">\r\n                <input matInput type="number" placeholder="کمترین ستون" formControlName="minCols" />\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex="18">\r\n                <input matInput type="number" placeholder="بیشترین ستون" formControlName="maxCols" />\r\n            </mat-form-field>\r\n        </div> \r\n        <div fxFlex="20" fxLayoutAlign="flex-end center" fxLayout="row wrap" fxLayoutGap="25px">\r\n         <button color="primary" mat-raised-button (click)="save()">ذخیره</button>\r\n    </div>\r\n</div>\r\n</div>'}]}],t.ctorParameters=function(){return[{type:d.Store},{type:undefined,decorators:[{type:g.Inject,args:[f.MAT_BOTTOM_SHEET_DATA]}]}]},t}(),J=function(){function t(t,e,n,r,o){var i=this;this.store=t,this.service=e,this.userFacadeService=n,this.configurationService=r,this.bottomSheet=o,this.itemValidateCallback=new g.EventEmitter,this.itemRemovedCallback=new g.EventEmitter,this.itemInitCallback=new g.EventEmitter,this.itemResizeCallback=new g.EventEmitter,this.itemChangeCallback=new g.EventEmitter,this.gridSizeChangedCallback=new g.EventEmitter,this.destroyCallback=new g.EventEmitter,this.initCallback=new g.EventEmitter,this.ready=!1,this.options={},this.userFacadeService.getInfo().pipe(u.filter(function(t){return t.CurrentSession!=undefined}),u.map(function(t){return t.CurrentSession.Username})).subscribe(function(t){i.username=t}),this.gridItemTypes=Object.keys(this.configurationService.config$.getValue().types),this.havePermission$=this.store.select(l.getAccountInfo).pipe(u.map(function(t){return![t,t._id,i.grid,i.grid.owner].some(function(t){return!t})&&t._id==i.grid.owner}))}return t.itemChange=function(t,e){console.log("itemChanged",t,e)},t.itemResize=function(t,e){console.log("itemResized",t,e)},t.prototype.ngOnInit=function(){this.grid=new G({oid:this.oid,config:{}}),this._get_grid_by_oid_and_update_component()},t.prototype._initCallback=function(t){this.initCallback.emit(t)},t.prototype.removeItem=function(t){this.grid.items.splice(this.grid.items.indexOf(t),1)},t.prototype.make_public=function(t,e){t.access=e.checked?"public":"private",this.service.update_item_access(t).subscribe(function(t){})},t.prototype.addItem=function(t){t.stopPropagation(),this.grid.items.push({})},t.prototype.emptyCellClick=function(t,e){console.log("empty cell click",t,e),this.grid.items.push(e)},t.prototype.openConfig=function(t){t.stopPropagation(),t.preventDefault(),this.bottomSheet.open(K,{data:{grid:this.grid}})},t.prototype.saveConfig=function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),this.store.dispatch(new S(this.grid))},t.prototype.gridItemTypeChanged=function(e){var n=this.bottomSheet.open(W,{data:{type:e.type}});n.afterDismissed().subscribe(function(t){e.config=n.instance.config,e.valid=n.instance.valid})},t.prototype.showConfig=function(e){var n=this.bottomSheet.open(W,{data:{type:e.type}});n.afterDismissed().subscribe(function(t){e.config=n.instance.config,e.valid=n.instance.valid})},t.prototype.goToEdit=function(){},t.prototype._get_grid_by_oid_and_update_component=function(){var e=this;this.service.selectById(this.oid).pipe(u.filter(function(t){return t!=undefined})).subscribe(function(t){(e.grid=t).config.outerMarginBottom=+t.config.outerMarginBottom,t.config.outerMarginRight=+t.config.outerMarginRight,e.options=C({},e.options,t.config),e.options.enableEmptyCellDrag&&(e.options.emptyCellDragCallback=e.emptyCellClick.bind(e)),e.ready=!0})},t.decorators=[{type:g.Component,args:[{selector:"ngs-grid",template:'<gridster [options]="options">\r\n    <div class="actions" >\r\n        <button mat-mini-fab (click)="addItem($event)">\r\n            <mat-icon>add</mat-icon>\r\n        </button>\r\n        <button mat-mini-fab (click)="openConfig($event)" *ngIf="havePermission$ | async">\r\n            <mat-icon>dashboard</mat-icon>\r\n        </button>\r\n        <button mat-mini-fab (click)="saveConfig($event)">\r\n            <mat-icon>done</mat-icon>\r\n        </button>\r\n    </div>\r\n    <gridster-item [item]="item" *ngFor="let item of grid.items">\r\n        <div class="initializer" fxLayout="row" fxLayoutAlign="space-between center">\r\n            <div fxFlex="nogrow">\r\n                <button mat-icon-button [matMenuTriggerFor]="menu">\r\n                    <mat-icon>more_horiz</mat-icon>\r\n                </button>\r\n                <mat-menu #menu="matMenu" class="rtl">\r\n                    <mat-checkbox *ngIf="grid.owner == username" labelPosition="before" [checked]="item.access==\'public\'"\r\n                        (change)="make_public(item,$event)">عمومی</mat-checkbox>\r\n                    <button mat-menu-item class="rtl" (click)="goToEdit()">\r\n                        <mat-icon>edit</mat-icon>\r\n                        <span>ویرایش افزونه</span>\r\n                    </button>\r\n                    \x3c!-- <button mat-menu-item class="rtl" (click)="showConfig(item)">\r\n                        <mat-icon>settings</mat-icon>\r\n                        <span>تنظیمات</span>\r\n                    </button> --\x3e\r\n                    <button mat-menu-item class="rtl" (click)="removeItem(item)">\r\n                        <mat-icon>delete</mat-icon>\r\n                        <span>حذف</span>\r\n                    </button>\r\n                </mat-menu>\r\n            </div>\r\n        </div>\r\n        <div class="widget-content">\r\n            <div *ngIf="!item.valid" fxFlex="100" class="form-container">\r\n                <h4>تنظیمات</h4>\r\n                <mat-form-field fxFlex="grow">\r\n                    <mat-select placeholder="Grid Item Type" [(ngModel)]="item.type" (selectionChange)="gridItemTypeChanged(item)">\r\n                        <mat-option *ngFor="let item of gridItemTypes" [value]="item">\r\n                            {{item}}\r\n                        </mat-option>\r\n                    </mat-select>\r\n                </mat-form-field>\r\n            </div>\r\n            <div *ngIf="item.valid" #test [ngsDynamicGridItemView]="item"></div>\r\n        </div>\r\n    </gridster-item>\r\n</gridster>',styles:[":host{width:100%;min-height:calc(100vh - 205px);display:-ms-grid;display:grid;direction:ltr}.initializer{position:absolute;z-index:10;top:5px;left:5px;height:25px}.actions{position:absolute;top:25px;right:25px;z-index:5}.actions button{margin-left:10px}.widget-content{position:relative;height:100%}.form-container{padding:25px;width:100%}[dir=rtl] .form-container{direction:rtl}.form-container mat-form-field{width:100%}.rtl{direction:rtl}"]}]}],t.ctorParameters=function(){return[{type:d.Store},{type:R},{type:l.UserFacadeService},{type:I},{type:f.MatBottomSheet}]},t.propDecorators={itemValidateCallback:[{type:g.Output}],itemRemovedCallback:[{type:g.Output}],itemInitCallback:[{type:g.Output}],itemResizeCallback:[{type:g.Output}],itemChangeCallback:[{type:g.Output}],gridSizeChangedCallback:[{type:g.Output}],destroyCallback:[{type:g.Output}],initCallback:[{type:g.Output}],oid:[{type:g.Input}]},t}(),Q=function(){function t(t,e,n){this.configurationService=t,this.resolver=e,this.container=n,this.mapTypeToComponent=this.configurationService.config$.getValue().types}return Object.defineProperty(t.prototype,"item",{set:function(t){t&&t.valid&&this._resolve_correct_component_base_on_widget_type(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype._resolve_correct_component_base_on_widget_type=function(e){var n=this;if(!this.mapTypeToComponent[e.type]){var t=Object.keys(this.mapTypeToComponent).join(", ");throw new Error("Trying to use an unsupported type ("+e.type+").\n\t\t  \t\t Supported types: "+t)}var r=this.resolver.resolveComponentFactory(this.mapTypeToComponent[e.type].viewComponent);this.component=this.container.createComponent(r),Object.keys(e.config||{}).forEach(function(t){n.component.instance[t]=e.config[t]})},t.decorators=[{type:g.Directive,args:[{selector:"[ngsDynamicGridItemView]"}]}],t.ctorParameters=function(){return[{type:I},{type:g.ComponentFactoryResolver},{type:g.ViewContainerRef}]},t.propDecorators={item:[{type:g.Input,args:["ngsDynamicGridItemView"]}]},t}(),X=function(){function t(){}return t.forRoot=function(t){return{ngModule:Y,providers:[{provide:y,useValue:t},I,R]}},t.decorators=[{type:g.NgModule,args:[{imports:[e.CommonModule,o.RouterModule,f.MatExpansionModule,f.MatSnackBarModule,f.MatIconModule,f.MatButtonModule,f.MatCardModule,f.MatSelectModule,f.MatInputModule,f.MatFormFieldModule,f.MatTabsModule,f.MatBottomSheetModule,f.MatRadioModule,n.FlexLayoutModule,f.MatMenuModule,f.MatToolbarModule,m.FormsModule,m.ReactiveFormsModule,f.MatSlideToggleModule,f.MatDividerModule,f.MatCheckboxModule,f.MatTableModule,r.GridsterModule],declarations:[v,J,K,H,W,Q],entryComponents:[K,W],exports:[J]}]}],t}(),Y=function(){function t(){}return t.decorators=[{type:g.NgModule,args:[{imports:[X,x,d.StoreModule.forFeature("grids",z),p.EffectsModule.forFeature([V,E,L,O])],exports:[X]}]}],t}();t.GridModel=G,t.NgsGridModule=X,t.NgsGridRootModule=Y,t.MODULE_DEFAULT_CONFIG=h,t.MODULE_CONFIG_TOKEN=y,t.ɵg=K,t.ɵi=W,t.ɵh=H,t.ɵj=Q,t.ɵk=x,t.ɵc=z,t.ɵb=J,t.ɵm=V,t.ɵl=q,t.ɵa=v,t.ɵn=E,t.ɵp=L,t.ɵr=O,t.ɵf=I,t.ɵe=R,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=soushians-grid.umd.min.js.map