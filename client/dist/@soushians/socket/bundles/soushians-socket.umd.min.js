!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@angular/core"),require("rxjs"),require("@ngrx/store"),require("@soushians/config"),require("rxjs/operators"),require("socket.io-client"),require("@angular/common")):"function"==typeof define&&define.amd?define("@soushians/socket",["exports","@angular/core","rxjs","@ngrx/store","@soushians/config","rxjs/operators","socket.io-client","@angular/common"],o):o((e.soushians=e.soushians||{},e.soushians.socket={}),e.ng.core,e.rxjs,null,null,e.rxjs.operators,null,e.ng.common)}(this,function(e,o,n,t,r,i,c,s){"use strict";var u={env:{production:!1,frontend_server:"http://localhost:3000"}},f=new o.InjectionToken("SocketModuleConfig"),a=function(){function e(e,o){var t=this;this.store=o,this.config$=new n.BehaviorSubject(u),this._config=Object.assign({},u,e),this.config$.next(this._config),this.store.select(r.getSocketModuleConfig).subscribe(function(e){e&&(t._config=Object.assign({},t._config,e.Config),t.config$.next(t._config))})}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:o.Inject,args:[f]}]},{type:t.Store}]},e}(),p="[SOCKET] SOCKET_RUN_SUCCESSFULLY",g=function(){this.type=p},d=c,l=function(){function e(e,o){var t=this;this.configService=e,this.store=o,this.configService.config$.pipe(i.map(function(e){return e.env.frontend_server}),i.map(function(e){return console.log(e,t.configService.config),t.socket=d(e),t.store.dispatch(new g)})).subscribe(function(){t.socket.on("DISPATCH_ACTION",function(e){t.store.dispatch({type:e.type,payload:e.payload})})})}return e.prototype.on=function(e){var t=this;return new n.Observable(function(o){t.socket.on(e,function(e){o.next(e)})})},e.prototype.emit=function(e,o){this.socket.emit(e,o)},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:a},{type:t.Store}]},e.ngInjectableDef=o.defineInjectable({factory:function(){return new e(o.inject(a),o.inject(t.Store))},token:e,providedIn:"root"}),e}(),h={number:0};function y(e,o){return void 0===e&&(e=h),o.type,e}var v={change:y},m=function(){function e(){}return e.forRoot=function(e){return{ngModule:b,providers:[{provide:f,useValue:e},a,l]}},e.decorators=[{type:o.NgModule,args:[{imports:[s.CommonModule]}]}],e}(),b=function(){function e(e){this.socketService=e}return e.decorators=[{type:o.NgModule,args:[{imports:[m,t.StoreModule.forFeature("socket",v)]}]}],e.ctorParameters=function(){return[{type:l}]},e}();e.NgsSocketModule=m,e.SocketService=l,e.ɵe=a,e.ɵf=f,e.ɵa=b,e.ɵb=y,e.ɵc=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=soushians-socket.umd.min.js.map