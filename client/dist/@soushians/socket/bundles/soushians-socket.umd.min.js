!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@ngrx/store"),require("rxjs"),require("@soushians/config"),require("rxjs/operators"),require("socket.io-client")):"function"==typeof define&&define.amd?define("@soushians/socket",["exports","@angular/core","@angular/common","@ngrx/store","rxjs","@soushians/config","rxjs/operators","socket.io-client"],t):t(((e=e||self).soushians=e.soushians||{},e.soushians.socket={}),e.ng.core,e.ng.common,e.store,e.rxjs,e.config,e.rxjs.operators,e._io)}(this,(function(e,t,o,n,r,i,s,c){"use strict";var u={env:{production:!1,frontend_server:"frontend_server/did/not/set"}},a=new t.InjectionToken("SocketModuleConfig"),f=function(){function e(e,t){var o=this;this.store=t,this.config$=new r.BehaviorSubject(u),this._config=Object.assign({},u,e),this.config$.next(this._config),this.store.select(i.getSocketModuleConfig).subscribe((function(e){e&&(o._config=Object.assign({},o._config,e.Config),o.config$.next(o._config))}))}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[a]}]},{type:n.Store}]},e}();var p={SOCKET_RUN_SUCCESSFULLY:"[SOCKET] SOCKET_RUN_SUCCESSFULLY",SOCKET_INITIALAZATION_FAILD:"[SOCKET] SOCKET_INITIALAZATION_FAILD"},d=function(){this.type=p.SOCKET_RUN_SUCCESSFULLY};var g=c,_=function(){function e(e,t){var o=this;this.configService=e,this.store=t,this.configService.config$.pipe(s.map((function(e){return e.env.frontend_server})),s.map((function(e){return o.socket=g(e),o.store.dispatch(new d)}))).subscribe((function(){o.socket.on("DISPATCH_ACTION",(function(e){o.store.dispatch({type:e.type,payload:e.payload})}))}))}return e.prototype.on=function(e){var t=this;return new r.Observable((function(o){t.socket.on(e,(function(e){o.next(e)}))}))},e.prototype.emit=function(e,t){this.socket.emit(e,t)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:f},{type:n.Store}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(f),t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e}();var S={number:0};function l(e,t){return void 0===e&&(e=S),t.type,e}var h={change:l};var v=function(){function e(){}return e.forRoot=function(e){return{ngModule:y,providers:[{provide:a,useValue:e},f,_]}},e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule]}]}],e}(),y=function(){function e(e){this.socketService=e,window.___starter=window.___starter||{},window.___starter.socket="8.0.10"}return e.decorators=[{type:t.NgModule,args:[{imports:[v,n.StoreModule.forFeature("socket",h)]}]}],e.ctorParameters=function(){return[{type:_}]},e}();e.NgsSocketModule=v,e.SocketService=_,e.ɵa=y,e.ɵb=l,e.ɵc=h,e.ɵe=f,e.ɵf=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=soushians-socket.umd.min.js.map