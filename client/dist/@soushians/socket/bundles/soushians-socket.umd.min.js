!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@angular/core"),require("rxjs"),require("@ngrx/store"),require("@soushians/config"),require("rxjs/operators"),require("socket.io-client"),require("@angular/common")):"function"==typeof define&&define.amd?define("@soushians/socket",["exports","@angular/core","rxjs","@ngrx/store","@soushians/config","rxjs/operators","socket.io-client","@angular/common"],o):o((e.soushians=e.soushians||{},e.soushians.socket={}),e.ng.core,e.rxjs,null,null,e.rxjs.operators,null,e.ng.common)}(this,function(e,o,n,t,r,i,c,s){"use strict";var u={development_uri:"http://localhost:3000",production_uri:"",env:{production:!1}},a=new o.InjectionToken("SocketModuleConfig"),f=function(){function e(e,o){var t=this;this.store=o,this.config$=new n.BehaviorSubject(u),this._config=Object.assign({},u,e),this.config$.next(this._config),this.store.select(r.getSocketModuleConfig).subscribe(function(e){e&&(t._config=Object.assign({},t._config,e.Config),t.config$.next(t._config))})}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:o.Inject,args:[a]}]},{type:t.Store}]},e}(),p={SOCKET_RUN_SUCCESSFULLY:"[SOCKET] SOCKET_RUN_SUCCESSFULLY",SOCKET_INITIALAZATION_FAILD:"[SOCKET] SOCKET_INITIALAZATION_FAILD"},d=function(){this.type=p.SOCKET_RUN_SUCCESSFULLY},l=function(){this.type=p.SOCKET_INITIALAZATION_FAILD},g=function(){function e(e,o){var t=this;this.configService=e,this.store=o,this.configService.config$.pipe(i.map(function(e){return e.env.production?e.production_uri:e.development_uri}),i.map(function(e){return t.socket=c.connect(e),t.store.dispatch(new d)})).subscribe(function(){t.socket.on("DISPATCH_ACTION",function(e){t.store.dispatch({type:e.type,payload:e.payload})})})}return e.prototype.on=function(e){var t=this;return new n.Observable(function(o){t.socket.on(e,function(e){o.next(e)})})},e.prototype.emit=function(e,o){this.socket.emit(e,o)},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:f},{type:t.Store}]},e.ngInjectableDef=o.defineInjectable({factory:function(){return new e(o.inject(f),o.inject(t.Store))},token:e,providedIn:"root"}),e}(),S={number:0};var h={change:function(e,o){return void 0===e&&(e=S),o.type,e}},_=function(){function e(){}return e.forRoot=function(e){return{ngModule:I,providers:[{provide:a,useValue:e},f,g]}},e.decorators=[{type:o.NgModule,args:[{imports:[s.CommonModule]}]}],e}(),I=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[_,t.StoreModule.forFeature("socket",h)]}]}],e}();e.NgsSocketModule=_,e.NgsSocketRootModule=I,e.MODULE_DEFAULT_CONFIG=u,e.MODULE_CONFIG_TOKEN=a,e.SocketActionTypes=p,e.SocketRunSuccessfullyAction=d,e.SocketInitialazationFailedAction=l,e.SocketService=g,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=soushians-socket.umd.min.js.map