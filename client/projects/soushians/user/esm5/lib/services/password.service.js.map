{
  "version": 3,
  "file": "password.service.js",
  "sources": [
    "ng://@soushians/user/projects/soushians/user/src/lib/services/password.service.ts"
  ],
  "sourcesContent": [
    "import { Injectable } from \"@angular/core\";\r\nimport { Headers, RequestOptions } from \"@angular/http\";\r\nimport { HttpHeaders, HttpClient } from \"@angular/common/http\";\r\nimport { Observable } from \"rxjs/Rx\";\r\nimport { Store } from \"@ngrx/store\";\r\n\r\nimport * as FeatureReducer from \"../feature/feature.reducers\";\r\n\r\nimport { ResetPasswordModel, ResetPasswordRequestModel, ChangePasswordModel } from \"../models\";\r\nimport { UserConfigurationService } from \"./user-configuration.service\";\r\n\r\n@Injectable({\r\n\tprovidedIn: \"root\"\r\n})\r\nexport class PasswordService {\r\n\tnumberOfRequeseted$: Observable<number>;\r\n\r\n\tconstructor(\r\n\t\tprivate http: HttpClient,\r\n\t\tprivate store: Store<any>,\r\n\t\tprivate userConfigurationService: UserConfigurationService\r\n\t) {\r\n\t\tthis.numberOfRequeseted$ = this.store.select(FeatureReducer.getNumberOfRequeseted);\r\n\t}\r\n\r\n\tisValidResetPasswordRequest(): Observable<boolean> {\r\n\t\treturn this.numberOfRequeseted$\r\n\t\t\t.take(1)\r\n\t\t\t.switchMap(count => (count < 3 ? Observable.of(true) : Observable.of(false)));\r\n\t}\r\n\r\n\tisValidResetPasswordReset(data: ResetPasswordModel.Request): Observable<any> {\r\n\t\tvar model = new ResetPasswordModel.Request(data);\r\n\t\tlet { Token } = model;\r\n\t\treturn this.http\r\n\t\t\t.get(`http://wifi.shatel.ir/api/v1/reset/tokens/${Token}`, { withCredentials: true })\r\n\t\t\t.map(response => response);\r\n\t}\r\n\r\n\trequestResetPasswordLink(data: ResetPasswordRequestModel.Request): Observable<any> {\r\n\t\tvar model = new ResetPasswordRequestModel.Request(data);\r\n\r\n\t\t// TODO:\r\n\t\t// return this.http.post(this.userConfigurationService.config.endpoints.resetPasswordRequest(model), model.getRequestBody(), { withCredentials: true })\r\n\t\treturn this.http\r\n\t\t\t.post(this.userConfigurationService.config.endpoints.editProfile, model.getRequestBody(), {\r\n\t\t\t\twithCredentials: true\r\n\t\t\t})\r\n\t\t\t.map(response => response);\r\n\t}\r\n\r\n\tchangePassword(data: ChangePasswordModel.Request): Observable<any> {\r\n\t\tvar model = new ChangePasswordModel.Request(data);\r\n\t\treturn this.http\r\n\t\t\t.patch(\"this.userConfigurationService.config.endpoints.changePassword(model)\", model.getRequestBody(), {\r\n\t\t\t\twithCredentials: true\r\n\t\t\t})\r\n\t\t\t.map(response => response);\r\n\t}\r\n\r\n\tresetPassword(data: ResetPasswordModel.Request): Observable<any> {\r\n\t\tvar model = new ResetPasswordModel.Request(data);\r\n\t\tlet { Token } = model;\r\n\t\treturn this.http\r\n\t\t\t.patch(`http://wifi.shatel.ir/api/v1/reset/tokens/${Token}`, model.getRequestBody(), {\r\n\t\t\t\twithCredentials: true\r\n\t\t\t})\r\n\t\t\t.map(response => response);\r\n\t}\r\n}\r\n\r\nexport var PasswordServiceStub = {};\r\n"
  ],
  "names": [],
  "mappings": ";;;;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE3C,OAAO,EAAe,UAAU,EAAE,MAAM,sBAAsB,CAAC;AAC/D,OAAO,EAAE,UAAU,EAAE,MAAM,SAAS,CAAC;AACrC,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AAEpC,OAAO,KAAK,cAAc,MAAM,6BAA6B,CAAC;AAE9D,OAAO,EAAE,kBAAkB,EAAE,yBAAyB,EAAE,mBAAmB,EAAE,MAAM,WAAW,CAAC;AAC/F,OAAO,EAAE,wBAAwB,EAAE,MAAM,8BAA8B,CAAC;;;;;AAKxE,MAAM;;;;;;IAGL,YACS,MACA,OACA;QAFA,SAAI,GAAJ,IAAI;QACJ,UAAK,GAAL,KAAK;QACL,6BAAwB,GAAxB,wBAAwB;QAEhC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC,qBAAqB,CAAC,CAAC;KACnF;;;;IAED,2BAA2B;QAC1B,MAAM,CAAC,IAAI,CAAC,mBAAmB;aAC7B,IAAI,CAAC,CAAC,CAAC;aACP,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;KAC/E;;;;;IAED,yBAAyB,CAAC,IAAgC;QACzD,qBAAI,KAAK,GAAG,IAAI,kBAAkB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACjD,IAAI,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC,IAAI;aACd,GAAG,CAAC,6CAA6C,KAAK,EAAE,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC;aACpF,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;KAC5B;;;;;IAED,wBAAwB,CAAC,IAAuC;QAC/D,qBAAI,KAAK,GAAG,IAAI,yBAAyB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;;QAIxD,MAAM,CAAC,IAAI,CAAC,IAAI;aACd,IAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,EAAE,KAAK,CAAC,cAAc,EAAE,EAAE;YACzF,eAAe,EAAE,IAAI;SACrB,CAAC;aACD,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;KAC5B;;;;;IAED,cAAc,CAAC,IAAiC;QAC/C,qBAAI,KAAK,GAAG,IAAI,mBAAmB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAClD,MAAM,CAAC,IAAI,CAAC,IAAI;aACd,KAAK,CAAC,sEAAsE,EAAE,KAAK,CAAC,cAAc,EAAE,EAAE;YACtG,eAAe,EAAE,IAAI;SACrB,CAAC;aACD,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;KAC5B;;;;;IAED,aAAa,CAAC,IAAgC;QAC7C,qBAAI,KAAK,GAAG,IAAI,kBAAkB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACjD,IAAI,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC,IAAI;aACd,KAAK,CAAC,6CAA6C,KAAK,EAAE,EAAE,KAAK,CAAC,cAAc,EAAE,EAAE;YACpF,eAAe,EAAE,IAAI;SACrB,CAAC;aACD,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;KAC5B;;;YAzDD,UAAU,SAAC;gBACX,UAAU,EAAE,MAAM;aAClB;;;;YAXqB,UAAU;YAEvB,KAAK;YAKL,wBAAwB;;;;;;;;;;;;;AA8DjC,MAAM,CAAC,qBAAI,mBAAmB,GAAG,EAAE,CAAC"
}
