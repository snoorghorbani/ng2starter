{
  "version": 3,
  "file": "toolbar-menu.component.js",
  "sources": [
    "ng://@soushians/layout/projects/soushians/layout/src/lib/dumb-components/toolbar-menu/toolbar-menu.component.ts"
  ],
  "sourcesContent": [
    "import { Component, Input, HostListener, Inject } from \"@angular/core\";\r\nimport { BehaviorSubject } from \"rxjs/BehaviorSubject\";\r\nimport { Store } from \"@ngrx/store\";\r\nimport { Location } from \"@angular/common\";\r\nimport { Observable } from \"rxjs/Observable\";\r\nimport { from } from \"rxjs/observable/from\";\r\nimport { DOCUMENT } from \"@angular/platform-browser\";\r\nimport { fromEvent } from \"rxjs/observable/fromEvent\";\r\nimport { of } from \"rxjs/observable/of\";\r\nimport { trigger, state, transition, style, animate } from \"@angular/animations\";\r\n\r\nimport { UserModel } from \"@soushians/user\";\r\nimport { LayoutConfigModel } from \"@soushians/config\";\r\n\r\nimport * as fromLayout from \"../../reducers\";\r\nimport {\r\n\tSignoutAction,\r\n\tOpenSecondSidenavAction,\r\n\tCloseSecondSidenavAction,\r\n\tCloseSidenavAction,\r\n\tOpenSidenavAction,\r\n\tChangeToolbatToComfortableModeAction,\r\n\tChangeToolbatToCompactModeAction,\r\n\tChangeToolbatToSummaryModeAction\r\n} from \"../../actions\";\r\nimport { FeatureState, getShowSecondSidebarStatus, getLayoutToolbar } from \"../../reducers\";\r\n\r\nimport { LayoutConfigurationService } from \"../../services/layout-configuration.service\";\r\nimport { State as toolbarState } from \"../../reducers/toolbar.reducer\";\r\n\r\n@Component({\r\n\tselector: \"layout-toolbar\",\r\n\ttemplate: `<mat-toolbar [@toolbarAnimation]=\"toolbarAnimationState | async\">\r\n  <mat-toolbar-row>\r\n    <app-logo-container fxFlex=\"none\" fxLayoutAlign=\"end center\"></app-logo-container>\r\n\r\n    <button type=\"button\" *ngIf='showSidebarMenu' (click)=\"toggleMainSidebar()\" mat-icon-button fxFlex=\"nogrow\" fxLayoutAlign=\"center center\">\r\n      <mat-icon>menu</mat-icon>\r\n    </button>\r\n    <span id='app-name'>\r\n      {{app_config?.Config.AppTitle}}\r\n    </span>\r\n    <app-title fxFlex fxLayoutAlign=\"start center\"></app-title>\r\n    <app-search-box fxFlex fxLayoutAlign=\"end center\"></app-search-box>\r\n    \r\n    <button *ngIf=\"!user.DisplayName\" mat-button routerLink=\"auth/signin\">\r\n      ورود\r\n    </button>\r\n    <button *ngIf=\"user.DisplayName\" mat-button [matMenuTriggerFor]=\"toolbarMenu1\">\r\n      <mat-icon>account_circle</mat-icon>\r\n      <span>\r\n        {{user?.DisplayName}}\r\n      </span>\r\n    </button>\r\n    <mat-menu #toolbarMenu1>\r\n      <button routerLink='/user/panel' mat-menu-item>\r\n        <mat-icon>fingerprint</mat-icon>\r\n        <span>\r\n          مدیریت کاربری\r\n        </span>\r\n      </button>\r\n      <button (click)='signout()' mat-menu-item>\r\n        <mat-icon>exit_to_app</mat-icon>\r\n        <span>خروج</span>\r\n      </button>\r\n    </mat-menu>\r\n    <button mat-icon-button type=\"button\" (click)=\"toggleSecondSidebar()\" fxFlex=\"nogrow\" fxLayoutAlign=\"center center\">\r\n      <mat-icon>notifications</mat-icon>\r\n    </button>\r\n    <button mat-icon-button (click)='goback()'>\r\n      <mat-icon>arrow_back</mat-icon>\r\n    </button>\r\n    \r\n  </mat-toolbar-row>\r\n  <mat-toolbar-row>\r\n    <button mat-button \r\n    *ngFor=\"let menu of menuItems$ | async\"\r\n    routerLinkActive=\"active\"\r\n    [routerLink]=\"[menu.route]\" \r\n    >\r\n    <!-- <mat-icon mat-list-icon>{{menu.icon}}</mat-icon> -->\r\n    <span>{{menu.title}}</span>\r\n  </button>\r\n</mat-toolbar-row>\r\n</mat-toolbar>`,\r\n\tstyles: [``],\r\n\tanimations: [\r\n\t\ttrigger(\"toolbarAnimation\", [\r\n\t\t\tstate(\r\n\t\t\t\t\"comfortable\",\r\n\t\t\t\tstyle({\r\n\t\t\t\t\tbackgroundColor: \"rgba(119,181,63,1)\",\r\n\t\t\t\t\tcolor: \"rgba(256,256,256,1)\",\r\n\t\t\t\t\theight: \"33vh\",\r\n\t\t\t\t\ttop: \"0\",\r\n\t\t\t\t\tboxShadow: \"1px 1px 3px rgba(0,0,0,0)\"\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t\tstate(\r\n\t\t\t\t\"compact\",\r\n\t\t\t\tstyle({\r\n\t\t\t\t\tbackgroundColor: \"rgba(256,256,256,1)\",\r\n\t\t\t\t\theight: \"128px\",\r\n\t\t\t\t\ttop: \"0\",\r\n\t\t\t\t\tboxShadow: \"1px 1px 3px rgba(0,0,0,0.5)\"\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t\tstate(\r\n\t\t\t\t\"summary\",\r\n\t\t\t\tstyle({\r\n\t\t\t\t\tbackgroundColor: \"rgba(256,256,256,1)\",\r\n\t\t\t\t\theight: \"128px\",\r\n\t\t\t\t\ttop: \"-64px\",\r\n\t\t\t\t\tboxShadow: \"1px 1px 3px rgba(0,0,0,0.5)\"\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t\ttransition(\"comfortable => compact\", animate(\"400ms ease-in\")),\r\n\t\t\ttransition(\"comfortable => summary\", animate(\"400ms ease-in\")),\r\n\t\t\ttransition(\"summary => compact\", animate(\"400ms ease-out\")),\r\n\t\t\ttransition(\"summary => comfortable\", animate(\"400ms ease-out\")),\r\n\t\t\ttransition(\"compact => comfortable\", animate(\"400ms ease-out\")),\r\n\t\t\ttransition(\"compact => summary\", animate(\"400ms ease-in\"))\r\n\t\t])\r\n\t]\r\n})\r\nexport class ToolbarMenuComponent {\r\n\tshowSecondSidenav: Observable<boolean>;\r\n\t@Input() showSidebarMenu;\r\n\t@Input(\"app-config\") app_config;\r\n\t@Input() user: UserModel;\r\n\tshowMainSidenav: Observable<boolean>;\r\n\ttoolbarAnimationState: Observable<\"comfortable\" | \"compact\" | \"summary\">;\r\n\tmenuItems$: Observable<any[]>;\r\n\tlastScroll: number;\r\n\tconfig: toolbarState;\r\n\tconfig$: Observable<toolbarState>;\r\n\tconstructor(\r\n\t\t@Inject(DOCUMENT) private document: any,\r\n\t\tprivate _location: Location,\r\n\t\tprivate store: Store<FeatureState>,\r\n\t\tpublic configurationService: LayoutConfigurationService\r\n\t) {\r\n\t\tthis.store.dispatch(new ChangeToolbatToComfortableModeAction());\r\n\t\tthis.config$ = this.store.select(getLayoutToolbar);\r\n\t\tthis.config$.subscribe(config => (this.config = config));\r\n\t\tthis.lastScroll = this.document.body.scrollTop;\r\n\t\tthis.showSecondSidenav = this.store.select(getShowSecondSidebarStatus);\r\n\t\tthis.showMainSidenav = this.store.select(fromLayout.getShowMainSidenav);\r\n\t\tthis.toolbarAnimationState = this.store.select(fromLayout.getLayoutToolbarMode);\r\n\t\tthis.menuItems$ = this.configurationService.config$.map(config => config.menuItems);\r\n\t\tfromEvent(this.document.body, \"scroll\").subscribe(() => {\r\n\t\t\tlet scrolledAmount = this.document.body.scrollTop;\r\n\t\t\tlet scrollToTop =\r\n\t\t\t\tscrolledAmount - this.lastScroll < 0 && this.document.body.scrollHeight - scrolledAmount < 100;\r\n\t\t\t// let scrollToTop = scrolledAmount - this.lastScroll < 0;\r\n\t\t\tthis.lastScroll = this.document.body.scrollTop;\r\n\t\t\tif (scrolledAmount == 0) {\r\n\t\t\t\tif (this.config.mode == \"comfortable\") return;\r\n\t\t\t\tthis.store.dispatch(new ChangeToolbatToComfortableModeAction());\r\n\t\t\t} else if (scrolledAmount < 128 || scrollToTop) {\r\n\t\t\t\tif (this.config.mode == \"compact\") return;\r\n\t\t\t\tthis.store.dispatch(new ChangeToolbatToCompactModeAction());\r\n\t\t\t} else {\r\n\t\t\t\tif (this.config.mode == \"summary\") return;\r\n\t\t\t\tthis.store.dispatch(new ChangeToolbatToSummaryModeAction());\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t@HostListener(\"body:scroll\", [])\r\n\tonWindowScroll() {\r\n\t\t// of(1)\r\n\t}\r\n\tsignout() {\r\n\t\tthis.store.dispatch(new SignoutAction());\r\n\t}\r\n\tgoback() {\r\n\t\tthis._location.back();\r\n\t}\r\n\ttoggleSecondSidebar() {\r\n\t\tlet action;\r\n\t\tthis.showSecondSidenav.subscribe(state => {\r\n\t\t\taction = state ? new CloseSecondSidenavAction() : new OpenSecondSidenavAction();\r\n\t\t});\r\n\t\tthis.store.dispatch(action);\r\n\t}\r\n\ttoggleMainSidebar() {\r\n\t\tlet action;\r\n\t\tthis.showMainSidenav.subscribe(state => {\r\n\t\t\taction = state ? new CloseSidenavAction() : new OpenSidenavAction();\r\n\t\t});\r\n\t\tthis.store.dispatch(action);\r\n\t}\r\n}\r\n"
  ],
  "names": [],
  "mappings": "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"
}
