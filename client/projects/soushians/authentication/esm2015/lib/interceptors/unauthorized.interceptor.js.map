{
  "version": 3,
  "file": "unauthorized.interceptor.js",
  "sources": [
    "ng://@soushians/authentication/projects/soushians/authentication/src/lib/interceptors/unauthorized.interceptor.ts"
  ],
  "sourcesContent": [
    "import \"rxjs/add/operator/do\";\r\nimport { HttpInterceptor } from \"@angular/common/http\";\r\nimport { HttpRequest } from \"@angular/common/http\";\r\nimport { HttpHandler } from \"@angular/common/http\";\r\nimport { Observable } from \"rxjs/Observable\";\r\nimport { HttpEvent } from \"@angular/common/http\";\r\nimport { HttpResponse } from \"@angular/common/http\";\r\nimport { HttpErrorResponse } from \"@angular/common/http\";\r\n\r\nimport { Store } from \"@ngrx/store\";\r\nimport { SignoutAction } from \"../actions\";\r\nimport * as fromAuth from \"../reducers\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Injectable()\r\nexport class UnauthorizedInterceptor implements HttpInterceptor {\r\n\tconstructor(\r\n\t\tprivate router: Router,\r\n\t\tprivate store: Store<fromAuth.FeatureState> // private signinService: SigninService\r\n\t) {}\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\treturn next\r\n\t\t\t.handle(request)\r\n\t\t\t.map((event: HttpEvent<any>) => {\r\n\t\t\t\tif (event instanceof HttpResponse) return event;\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tif (!(err instanceof HttpErrorResponse)) return;\r\n\t\t\t\tif (err.status != 401) return;\r\n\t\t\t\tif (err.url.includes(\"logout\")) return;\r\n\r\n\t\t\t\tthis.store.dispatch(new SignoutAction());\r\n\r\n\t\t\t\treturn Observable.throw(\"Unauthorized\");\r\n\t\t\t});\r\n\t}\r\n}\r\n"
  ],
  "names": [],
  "mappings": ";;;;AAAA,OAAO,sBAAsB,CAAC;AAI9B,OAAO,EAAE,UAAU,EAAE,MAAM,iBAAiB,CAAC;AAE7C,OAAO,EAAE,YAAY,EAAE,MAAM,sBAAsB,CAAC;AACpD,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AAEzD,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AACpC,OAAO,EAAE,aAAa,EAAE,MAAM,YAAY,CAAC;AAE3C,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AAGzC,MAAM;;;;;IACL,YACS,QACA;;QADA,WAAM,GAAN,MAAM;QACN,UAAK,GAAL,KAAK;KACV;;;;;;IACJ,SAAS,CAAC,OAAyB,EAAE,IAAiB;QACrD,MAAM,CAAC,IAAI;aACT,MAAM,CAAC,OAAO,CAAC;aACf,GAAG,CAAC,CAAC,KAAqB,EAAE,EAAE;YAC9B,EAAE,CAAC,CAAC,KAAK,YAAY,YAAY,CAAC;gBAAC,MAAM,CAAC,KAAK,CAAC;SAChD,CAAC;aACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;YACd,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,YAAY,iBAAiB,CAAC,CAAC;gBAAC,MAAM,CAAC;YAChD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC;gBAAC,MAAM,CAAC;YAC9B,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBAAC,MAAM,CAAC;YAEvC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,aAAa,EAAE,CAAC,CAAC;YAEzC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;SACxC,CAAC,CAAC;KACJ;;;YArBD,UAAU;;;;YAFF,MAAM;YAJN,KAAK"
}
